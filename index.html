<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Yixin&#39;s sharing">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Yixin&#39;s sharing">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Ren Yixin">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Yixin's sharing</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yixin's sharing</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/01/Hi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/01/Hi/" itemprop="url">Hi,guys! Welcome</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-01T16:56:17+08:00">
                2019-09-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  147
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="welcome-to-my-blog"><strong>Welcome to my Blog! </strong></h1>
<hr>
<p><strong>This is the very first post in my blog, here I'm going to introduce to your guys who I am and why I establish this Blog.</strong></p>
<p>My name is <strong>Ren Yixin</strong>, an undergraduate student in Zhejiang university, China.</p>
<p>In this blog, I'm going to share with you anything I've learnt in my academic study and my life, including:</p>
<ul>
<li>My research dairy</li>
<li>Some technical review/prospect on a certain field eg: Addictive Manufacturing; Plastic processing;</li>
<li>Some attempts to do pioneering in my own business<br>
</li>
<li>Unlimited social comments</li>
<li>Why I laughed just now ...</li>
</ul>
<p>Thanks to internet, which gives me a free access to every of you. I believe that every bit of our single efforts will push a little boundry of infinite human world and is worth a listener.</p>
<p><strong>Contact me at:</strong></p>
<p><strong>Email</strong>: renyixin@zju.edu.cn</p>
<p><strong>Phone number/Wechat</strong>: +86 15857438969</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/16/ald/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/16/ald/" itemprop="url">ald</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-16T18:54:30+08:00">
                2020-06-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  8.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  32
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="公司概况"><a class="markdownIt-Anchor" href="#公司概况"></a> 公司概况</h2>
<h3 id="1-公司简介"><a class="markdownIt-Anchor" href="#1-公司简介"></a> 1. 公司简介</h3>
<p>阿拉丁公司成立于2009年3月，注册资本3,000万元，丁于2014年06月12日在新三板挂牌上市。公司主要从事高纯度科技研发用材料和试剂产品制造，掌握了试剂的纯化和研发工艺技术，研发生产分析科学、高端化学、生命科学、材料科学等领域的高端试剂产品，同时配套少量实验耗材，目前主要面向高等院校、科研院所和企事业单位的研发机构，依靠自主电商平台实现对外销售。</p>
<h3 id="2-所处行业现状"><a class="markdownIt-Anchor" href="#2-所处行业现状"></a> 2. 所处行业现状</h3>
<h3 id="1研发经费支出较快带动科研所需试剂需求"><a class="markdownIt-Anchor" href="#1研发经费支出较快带动科研所需试剂需求"></a> （1）研发经费支出较快，带动科研所需试剂需求</h3>
<p>![手机屏幕截图  描述已自动生成](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image002.jpg)</p>
<p>图1-1 国内科研经费投入保持高增长（来源国家统计局，兴业证券经济与金融研究院）</p>
<p>随着我国高科技行业的迅速发展，国内科研机构科学实验活动日益频繁，科研机构对高端科研试剂产品的需求明显增加。根据国家统计局数据，2019年我国科研经费支出为21737亿元，同比增长10.5%，是世界第二大科技研发市场。化学试剂作为基础科学研究不可或缺的基础将随着国内科研投入的持续增长而稳定发展。据新思界产业研究中心发布的《“十三五”期间化学试剂行业发展环境预测及投资策略分析研究报告》数据，“2014-2018年，中国化学试剂行业发展迅速，尤其是高纯化学试剂，2018年中国化学试剂行业市场规模增长至1243.17亿元，同比增长18.3%，化学试剂需求增速高于我国研究经费支出的增长。据新思界产业研究中心预测，“到2024年，中国化学试剂行业市场规模或将达到2,495.75亿元，年均复合增长率为12.32%”。</p>
<h3 id="2高端科研试剂市场供需矛盾突出进口替代空间大"><a class="markdownIt-Anchor" href="#2高端科研试剂市场供需矛盾突出进口替代空间大"></a> （2）高端科研试剂市场供需矛盾突出，进口替代空间大</h3>
<p>目前，世界上试剂品种超过30万种，而国内仪器分析试剂、特种试剂、电子信息行业专用科研试剂以及生化试剂都还没形成规模，特别是高端试剂的市场缺口较大，科研试剂市场供需矛盾十分突出。国内试剂生产企业数量较多，但大部分企业规模较小，生产特定的几种中低端化学试剂，供应有限的客户群体，尚未形成具有垄断地位的大型企业。Sigma-Aldrich、ThermoFisher Alfa Aesar 等外资企业占据了超过90%的高端科研试剂市场份额，处于绝对的垄断地位。相比低端市场，高端市场具有利润高、成长空间大的特点。随着国内领先的化学试剂企业向高端迈进，进口替代具有十分广阔的进取空间。</p>
<h3 id="3-经营业务"><a class="markdownIt-Anchor" href="#3-经营业务"></a> 3. 经营业务</h3>
<p>科研用试剂为阿拉丁公司核心业务。针对我国近几年国内不生产而靠大量进口高端试剂的情况进行攻关，已经成功开发了约35000种试剂产品，其中超过50%的产品均为公司专有产品，市场竞争力较强。公司“芯硅谷”耗材和小仪器项目于2015年4月上线，目前已有超过2万个品种，采用OEM方式进行生产，并通过自有电商平台和天猫、淘宝平台进行销售。公司通过试剂与耗材仪器配套协同销售，未来公司将形成以“阿拉丁”品牌科研试剂和“芯硅谷”品牌实验耗材为支柱的主营业务结构。</p>
<h3 id="4-经营模式"><a class="markdownIt-Anchor" href="#4-经营模式"></a> 4. 经营模式</h3>
<p>![文本框: 订单模式OEM生产](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image003.jpg)![img](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image004.jpg)![圆角矩形: 自主设计、制造高端耗材和仪器类产品](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image005.jpg)![img](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image006.jpg)![img](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image008.jpg)</p>
<p>图1-2 阿拉丁经营模式</p>
<p>如图1-2为阿拉丁公司两块经营业务“试剂”和“耗材”的经营模式。其核心在于公司自主建立了网上电商平台，形成“电商平台-ERP系统-WMS智能物流”的商业模式。</p>
<p>在生产方面，公司采用订单模式，生产项目全部根据ERP系统的配方和工艺流程进行生产，不同产品都有不同的配方和处理工艺流程，实现库存适量、产品供应快速、高效、及时。</p>
<p>在销售方面，电商销售模式的特点在于通过完善的线上平台产品信息帮助客户实现对所需目标产品的快速精准选择；利用发达的快递网络实现产品的准确及时配送。结合化学试剂产业链特点，电商销售模式的“小批量销售、可零售物流”的特点可解决化学试剂行业客户分散、客单价小的问题，将品类繁多的科研试剂及耗材众多的下游客户联结起来；此外，电商模式在客户数据分析上具有天然优势，可利用大数据分析解决客户需求多样化痛点，最终实现降本增效。</p>
<h3 id="5-经营战略"><a class="markdownIt-Anchor" href="#5-经营战略"></a> 5. 经营战略</h3>
<p>据其2019年公司财务报告指出，公司经营发展战略是以核心技术为依托，将阿拉丁打造成为一家科研用试剂的高科技企业，为客户提供多品种、多维度、高品质试剂类产品，主要分为以下三点。</p>
<p>**（1）注重产品技术革新和自主创新，不断加大研发力度。**阿拉丁将对现有产品进行逐步升级，并加速推进一批具有良好市场前景的生命科学试剂项目，逐步推出抗体、蛋白相关产品。产品升级和新领域产品的发布加强了公司在生命科学领域的优势；新产品系列可为公司带来更大的增长空间。</p>
<p>**（2）优化产品结构、丰富产品线、打造实验室综合服务平台。**阿拉丁将以现有产品品种为起点，进一步做大做强现有的试剂产品，同时加快配套的OEM耗材项目建设进度，致力于增加耗材和小仪器多样性，形成试剂+耗材的一站式采购解决方案，以此增加客户吸引力，增强客户粘性；未来公司将形成以“阿拉丁”品牌科研试剂和“芯硅谷”品牌实验耗材为支柱的主营业务结构。</p>
<p>**（3）推进产业链整合。**公司将通过自建、投资、并购等方式迅速完成全方位技术和产业布局，进一步促进业务发展和公司长期目标的实现。合理利用财务杠杆进行投融资活动。通过并购重组迅速把企业做大做强，为企业实现跨越式发展做好充分准备</p>
<h2 id="二-财务报表分析"><a class="markdownIt-Anchor" href="#二-财务报表分析"></a> 二、财务报表分析</h2>
<h3 id="1-资产结构及其趋势分析"><a class="markdownIt-Anchor" href="#1-资产结构及其趋势分析"></a> 1. 资产结构及其趋势分析</h3>
<p>表1-1        2017-2019年资产负债结构分析表     单位：元</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017年</th>
<th>占总资产（总负债）比重</th>
<th>2018年</th>
<th>占总资产（总负债）比重</th>
<th>2019年</th>
<th>占总资产（总负债）比重</th>
</tr>
</thead>
<tbody>
<tr>
<td>资产</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>货币资金</td>
<td>85,617,800.00</td>
<td>24.75%</td>
<td>74,358,000.00</td>
<td>20.41%</td>
<td>83,577,900.00</td>
<td>21.40%</td>
</tr>
<tr>
<td>应收账款</td>
<td>14,978,000.00</td>
<td>4.33%</td>
<td>14,917,900.00</td>
<td>4.09%</td>
<td>18,041,000.00</td>
<td>4.62%</td>
</tr>
<tr>
<td>存货</td>
<td>51,500,000.00</td>
<td>14.89%</td>
<td>79,040,700.00</td>
<td>21.69%</td>
<td>96,964,900.00</td>
<td>24.83%</td>
</tr>
<tr>
<td>流动资产合计</td>
<td>156,491,900.00</td>
<td>45.24%</td>
<td>176,391,500.00</td>
<td>48.41%</td>
<td>205,388,600.00</td>
<td>52.58%</td>
</tr>
<tr>
<td>投资性房地产</td>
<td>11,229,700.00</td>
<td>3.25%</td>
<td>49,525,800.00</td>
<td>13.59%</td>
<td>48,086,200.00</td>
<td>12.31%</td>
</tr>
<tr>
<td>固定资产</td>
<td>147,061,200.00</td>
<td>42.52%</td>
<td>117,057,600.00</td>
<td>32.13%</td>
<td>114,059,800.00</td>
<td>29.20%</td>
</tr>
<tr>
<td>无形资产</td>
<td>28,044,479.12</td>
<td>8.11%</td>
<td>18,709,345.10</td>
<td>5.14%</td>
<td>17,785,138.09</td>
<td>4.55%</td>
</tr>
<tr>
<td>非流动资产合计</td>
<td>189,394,700.00</td>
<td>54.76%</td>
<td>187,950,600.00</td>
<td>51.59%</td>
<td>185,199,600.00</td>
<td>47.42%</td>
</tr>
<tr>
<td>资产合计</td>
<td>345,886,600.00</td>
<td>100.00%</td>
<td>364,342,100.00</td>
<td>100.00%</td>
<td>390,588,200.00</td>
<td>100.00%</td>
</tr>
<tr>
<td>负债</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>短期借款</td>
<td>1,200,000</td>
<td>2.38%</td>
<td>3,000,000.00</td>
<td>7.21%</td>
<td>4,000,000.00</td>
<td>9.01%</td>
</tr>
<tr>
<td>应付票据及应付账款</td>
<td>13,454,400</td>
<td>26.74%</td>
<td>17,523,400.00</td>
<td>42.10%</td>
<td>17,061,200.00</td>
<td>38.42%</td>
</tr>
<tr>
<td>预收款项</td>
<td>8,088,600</td>
<td>16.08%</td>
<td>9,786,400.00</td>
<td>23.51%</td>
<td>9,265,500.00</td>
<td>20.86%</td>
</tr>
<tr>
<td>应付职工薪酬</td>
<td>3,825,700</td>
<td>7.60%</td>
<td>4,126,000.00</td>
<td>9.91%</td>
<td>4,520,500.00</td>
<td>10.18%</td>
</tr>
<tr>
<td>应交税费</td>
<td>5,674,800</td>
<td>11.28%</td>
<td>2,525,500.00</td>
<td>6.07%</td>
<td>4,608,500.00</td>
<td>10.38%</td>
</tr>
<tr>
<td>流动负债合计</td>
<td>36,668,800</td>
<td>72.88%</td>
<td>38,028,600.00</td>
<td>91.36%</td>
<td>40,482,000.00</td>
<td>91.16%</td>
</tr>
<tr>
<td>长期借款</td>
<td>10,000,000</td>
<td>19.87%</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
</tr>
<tr>
<td>递延收益-非流动负债</td>
<td>3,645,800</td>
<td>7.25%</td>
<td>3,562,500.00</td>
<td>8.56%</td>
<td>3,479,200.00</td>
<td>7.83%</td>
</tr>
<tr>
<td>非流动负债合计</td>
<td>13,645,800</td>
<td>27.12%</td>
<td>3,598,500.00</td>
<td>8.64%</td>
<td>3,925,200.00</td>
<td>8.84%</td>
</tr>
<tr>
<td>负债合计</td>
<td>50,314,700</td>
<td>100%</td>
<td>41,627,100.00</td>
<td>100%</td>
<td>44,407,200.00</td>
<td>100%</td>
</tr>
</tbody>
</table>
<p>表1-2        2017-2019年资产增长率分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017年</th>
<th>2018年</th>
<th>2019年</th>
</tr>
</thead>
<tbody>
<tr>
<td>流动资产增长率</td>
<td>10.45%</td>
<td>12.72%</td>
<td>16.44%</td>
</tr>
<tr>
<td>非流动资产增长率</td>
<td>0.17%</td>
<td>-0.76%</td>
<td>-1.46%</td>
</tr>
<tr>
<td>总资产增长率</td>
<td>4.58%</td>
<td>5.34%</td>
<td>7.20%</td>
</tr>
</tbody>
</table>
<p>通过表2-1资产结构负债分析表的资产部分可看出，2019年公司资产合计约4亿，在化学试剂行业的资产规模属于中小型。流动资产占比略低于非流动资产，资产结构良好。</p>
<p>公司的主要流动资产有货币资金、存货和应收账款，其中存货占比较大，在2017-2019年有明显上升趋势，流动资产变现能力降低。年报中指出系公司为扩大品种，提高市场竞争力，持续增加库存产品品种，同时保持产品必要的安全库存所致。流动资产整体占比也与存货呈同向变动，说明流动资产主要受存货增加影响；应收账款略有降低，系公司原材料采购放缓,来料及时检验入库并付款；非流动资产中最主要受到固定资产波动的影响，固定资产绝对金额与占比均呈下降趋势，从而导致非流动资产的下降。</p>
<p>根据表2-2资产增长率分析表可知，阿拉丁公司的流动资产增长率呈逐年增加，非流动资产则呈现负增长，说明公司资产流动性在增强，流动资产规模增大。两者共同作用下总资产增长率仍呈现增长态势，说明流动资产的正面贡献相对较大。</p>
<p>从负债结构分析，公司负债规模小，且整体仍在降低，认为其整体负债风险低。流动负债中，应付票据及应付账款项、预收款项占较大比重，主要原因仍是公司扩大产品品类时，采购已到货，但受检测设备、人员限制，尚待检测通过入库暂未完成票、款、物核销，但这一情况在逐渐好转；非流动负债中， 2019年长期借款减至0，预示着企业年前扩张搬迁所用的款项已还清，自身的资金足够周转，资产流动性增强，资金成本降低。</p>
<h3 id="2-盈利能力分析"><a class="markdownIt-Anchor" href="#2-盈利能力分析"></a> 2. 盈利能力分析</h3>
<p>表2-1      2017-2019年结构百分比利润表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>占收入比重</th>
<th>2018</th>
<th>占收入比重</th>
<th>2019</th>
<th>占收入比重</th>
</tr>
</thead>
<tbody>
<tr>
<td>营业收入</td>
<td>126,496,695.66</td>
<td>100.00%</td>
<td>166,290,303.94</td>
<td>100.00%</td>
<td>209,603,356.38</td>
<td>100.00%</td>
</tr>
<tr>
<td>营业成本</td>
<td>34,069,500.00</td>
<td>26.93%</td>
<td>45,360,900.00</td>
<td>27.28%</td>
<td>61,228,800.00</td>
<td>29.21%</td>
</tr>
<tr>
<td>毛利率</td>
<td>92,427,195.66</td>
<td>73.07%</td>
<td>121,929,703.94</td>
<td>72.72%</td>
<td>148,374,556.38</td>
<td>70.79%</td>
</tr>
<tr>
<td>销售费用</td>
<td>14,915,900.00</td>
<td>11.79%</td>
<td>18,181,300.00</td>
<td>10.93%</td>
<td>21,307,000.00</td>
<td>10.17%</td>
</tr>
<tr>
<td>管理费用</td>
<td>28,163,100.00</td>
<td>22.26%</td>
<td>29,451,000.00</td>
<td>17.71%</td>
<td>34,458,300.00</td>
<td>16.44%</td>
</tr>
<tr>
<td>研发费用</td>
<td>8,962,200.00</td>
<td>7.07%</td>
<td>12,616,900.00</td>
<td>7.59%</td>
<td>15,720,200.00</td>
<td>7.50%</td>
</tr>
<tr>
<td>财务费用</td>
<td>797,300.00</td>
<td>0.63%</td>
<td>-1,679,300.00</td>
<td>-1.01%</td>
<td>-79,400.00</td>
<td>-0.04%</td>
</tr>
<tr>
<td>净利润</td>
<td>31,965,100.00</td>
<td>25.27%</td>
<td>53,415,400.00</td>
<td>32.12%</td>
<td>63,691,000.00</td>
<td>30.39%</td>
</tr>
</tbody>
</table>
<p>表2-2      2017-2019年收入、成本、利润增长率分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>营业收入增长率</td>
<td>19.77%</td>
<td>31.46%</td>
<td>26.05%</td>
</tr>
<tr>
<td>营业成本增长率</td>
<td>20.14%</td>
<td>33.14%</td>
<td>34.98%</td>
</tr>
<tr>
<td>净利润增长率</td>
<td>55.24%</td>
<td>67.11%</td>
<td>19.24%</td>
</tr>
</tbody>
</table>
<p>表2-3       2019年收入项目来源结构百分比表</p>
<table>
<thead>
<tr>
<th>主要类别/项目</th>
<th>收入金额</th>
<th>占营业收入比重</th>
</tr>
</thead>
<tbody>
<tr>
<td>主营业务</td>
<td>96.92%</td>
<td></td>
</tr>
<tr>
<td>科研耗材</td>
<td><code>197,092,386.36</code></td>
<td>94.03%</td>
</tr>
<tr>
<td>实验耗材</td>
<td><code>6,065,472.97</code></td>
<td>2.89%</td>
</tr>
<tr>
<td>其他业务</td>
<td>3.08%</td>
<td></td>
</tr>
</tbody>
</table>
<p>表2-4       2019年收入客户来源结构百分比表</p>
<table>
<thead>
<tr>
<th>主要客户</th>
<th>销售金额</th>
<th>年度销售占比</th>
</tr>
</thead>
<tbody>
<tr>
<td>上海百舜生物科技有限公司</td>
<td>13,494,314.42</td>
<td>6.64%</td>
</tr>
<tr>
<td>北京伊诺凯科技有限公司</td>
<td>13,336,092.63</td>
<td>6.56%</td>
</tr>
<tr>
<td>中国科学院</td>
<td>6,413,360.23</td>
<td>3.16%</td>
</tr>
<tr>
<td>国药集团化学试剂有限公司</td>
<td>6,044,675.36</td>
<td>2.98%</td>
</tr>
<tr>
<td>苏州星科元信息科技有限公司</td>
<td>5,757,324.03</td>
<td>2.83%</td>
</tr>
<tr>
<td>合计</td>
<td>45,045,766.67</td>
<td>22.17%</td>
</tr>
</tbody>
</table>
<p>表2-5         2017-2019年盈利能力指标分析</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>销售净利率</td>
<td>25.27%</td>
<td>32.12%</td>
<td>30.39%</td>
</tr>
<tr>
<td>销售毛利率</td>
<td>73.07%</td>
<td>72.72%</td>
<td>70.79%</td>
</tr>
<tr>
<td>净资产收益率（ROE）</td>
<td>11.16%</td>
<td>17.28%</td>
<td>19.08%</td>
</tr>
</tbody>
</table>
<p>![img](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image010.jpg)</p>
<p>图2-1 盈利能力指标变动趋势图</p>
<h3 id="1收入结构专一客户结构健康合理"><a class="markdownIt-Anchor" href="#1收入结构专一客户结构健康合理"></a> （1）收入结构专一，客户结构健康合理</h3>
<p>表2-3为阿拉丁公司2019年收入的来源结构表，其中主营业务占营业收入的96.92%，科研耗材在其中占据绝大多数份额，公司年报并未透露具体产品的利润。从这些数据看，阿拉丁的收入来源较专一，其提出的“芯硅谷”实验耗材还未能积累足够货单量。</p>
<p>从表2-4的客户分布来看，前五大客户包含有中国科学院系和国药集团，不存在销售占比7%以上的单一客户，并无依赖单一客户的情况。大客户的来源占年度销售的比例小，超过70%的销售来自电商平台下单的分散科研个人和团体，客户结构与其提出的运营模式和重心相匹配，健康合理。</p>
<h3 id="2重视科研投入保持较高水平研发投入"><a class="markdownIt-Anchor" href="#2重视科研投入保持较高水平研发投入"></a> （2）重视科研投入，保持较高水平研发投入</h3>
<p>根据结构百分比利润表（表2-1），在阿拉丁公司的主要成本费用结构中，研发费用投入持续加大。2019年公司用于研发投入资金1,572.02万元，同比增长24.6%，占营业收入的比重为7.5%，稳定在相对较高水平。</p>
<p>作为一家科研驱动型公司，阿拉丁重视创新研发，拥有实力较强的研发团队，研发人员占员工总量的比重稳定在20%以上，员工本硕博高学历占比达43%。凭借强大的研发实力和科研成果转化能力，目前公司拥有112项专利，其中发明专利11项。公司研发项目主要聚焦于色谱级、超纯级、光谱级、高纯试剂关键工艺方法的技术开发，以及研发成果专利化，并运用到生产过程中，实现技术及时转移转化。脂酸纯化方法、芥酸提纯方法及甲基磺酸乙脂的合成方法为我国精细化工化学试剂行业中首创。</p>
<p>这些技术、专利的获得，对外有助于提升公司形象，客户满意度；对内降低生产成本，增加毛利率，提高发展质量，增强核心竞争力。</p>
<h3 id="3电商平台模式导致起始销售-管理费用高规模效应渐显"><a class="markdownIt-Anchor" href="#3电商平台模式导致起始销售-管理费用高规模效应渐显"></a> （3）电商平台模式导致起始销售、管理费用高，规模效应渐显</h3>
<p>事实上在费用率方面，阿拉丁公司都是处于劣势。公司的管理费用居高不下，同行业的公司的管理费用通常占收入的5%-10%之间，阿拉丁在2017年甚至超过20%，这可能是公司内部管理水平低效，管理体系不明确，固有消耗高导致的。而在销售费用率方面，10%也是非常高的比例。加上前一段所述的较高的研发费用，阿拉丁公司日常运营开支和成本是非常高的，这也导致了其突出的毛利率优势下没那么惊艳的净利润。</p>
<p>不过从近几年的趋势上也可以看出，阿拉丁费用率在大幅下降，管理费用率下降至16.44%，销售费用率在2019年下降至10.17%。</p>
<p>结合阿拉丁公司销售渠道和商业模式分析，这些指标和变动主要由其电商平台模式的规律导致。首先，电商平台初期的资源投入很大，网站建设、运营，对两边的“补贴”获取流量，广告营销等，导致其投入产出比要低于传统的销售渠道。随着资源投入到一定程度，平台的规模效应将会发挥优势，获客单价将大幅减小；电商模式下可以对销售费用的效率高低做精准的数据跟踪，易于对销售部门做好考核以及对业务做出引导，通过精细运营既实现了成本的降低。近几年费用率的降低也显示了该转折点的苗头。</p>
<h3 id="4近年扩大产能运营成本暂时增加产品结构优化"><a class="markdownIt-Anchor" href="#4近年扩大产能运营成本暂时增加产品结构优化"></a> （4）近年扩大产能，运营成本暂时增加，产品结构优化</h3>
<p>从表2-1和表2-2可以看出，阿拉丁的营业成本逐年增加，2019年接近收入结构的30%。从趋势来看，成本以超过30个点的比例增长，系与产品销售收入增长相一致的产品成本结转。</p>
<p>经分析，原因可以追溯到2016年，阿拉丁完成新工厂的搬迁。新工厂和老工厂相比拥有更大的占地面积和仓储空间，行业内企业的仓储能力能决定企业库存产品的种类及数量,而这些都是客户选择供应商的重要标准。因此，公司仓储瓶颈成功破除，产能扩大，在近几年持续丰富公司产品种类。此外，公司亦在调整试剂产品结构，淘汰低毛利产品，计划从高端化学试剂向生化试剂、分析色谱和材料学等前景更好方向扩张。</p>
<p>受制于营业成本的增加，净利润增幅虽仍保持在19.04%的增幅，但相比同期有明显下降。在这一系列扩大产能、优化结构的举措下，虽牺牲了部分短期净利润，但对公司长期的核心竞争力和稳定发展有利好。</p>
<h3 id="5产品定位高端盈利能力领跑行业"><a class="markdownIt-Anchor" href="#5产品定位高端盈利能力领跑行业"></a> （5）产品定位高端，盈利能力领跑行业</h3>
<p>根据表2-5可得，阿拉丁公司平均净利润率稳定在30%左右，毛利率长期保持在70%以上。如图2-2，阿拉丁的毛利率远超过行业同行。如图2-3，虽然成本增加，净利润的增幅放缓，但公司盈利能力依然显著超过同行业平均水平。就2019年而言，公司销售净利率为30.39%，而第二位的南京试剂销售净利率为12.56%。</p>
<p>![黄色的地图  描述已自动生成](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image012.jpg) ![地图的截图  描述已自动生成](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image014.jpg)</p>
<p>图2-2 公司销售净利率明显高于国内可比公司      图2-3 公司净资产收益率在国内处于较高水平</p>
<p>（资料来源：Wind，华鑫证券研发部）</p>
<p>阿拉丁高盈利能力的原因有如下两点：</p>
<p>一，公司自行研发生产产品，并且有自己的品牌（不代理销售任何其他品牌），因此产品质量及生产成本可控，毛、净利率水平较高。</p>
<p>二，公司采取高端化学试剂的产品定位策略且拥有诸多专利和垄断性的核心技术，其创立的“阿拉丁”和“芯硅谷”品牌已在业内获得这批客户的广泛认可，因此公司对客户具有较强的议价能力。很高的毛利率之下，公司又能有足够的资金支持研发活动，巩固核心竞争力，形成高盈利水平的商业闭环。</p>
<p>从趋势来看，由表2-2增长率分析表可得，阿拉丁近三年营业收入增长率保持在较高水平，公司收入保持良好增长势头。</p>
<p>综上所述，根据收入结构表认为阿拉丁公司业务专一度高，客户结构合理。根据结构百分比利润表得出：科研投入导致其产品研发能力强，核心竞争能力强；电商平台模式下管理和销售费用率逐步下降；近年来产能扩大，运营成本大幅增加，产品结构得到优化。从盈利指标分析表得出，公司整体盈利能力佳，毛利率和净利率领先行业。</p>
<h3 id="3-营运能力分析"><a class="markdownIt-Anchor" href="#3-营运能力分析"></a> 3. 营运能力分析</h3>
<p>表3-1        2017-2019年营运能力指标分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>应收账款周转天数</td>
<td>21.82</td>
<td>26.03</td>
<td>28.70</td>
</tr>
<tr>
<td>存货周转天数</td>
<td>84.69</td>
<td>113.66</td>
<td>153.25</td>
</tr>
<tr>
<td>固定资产周转天数</td>
<td>434.94</td>
<td>289.86</td>
<td>201.23</td>
</tr>
</tbody>
</table>
<p>表3-2        2017-2019年营运能力指标横向对比分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>阿拉丁</th>
<th>泰坦科技</th>
<th>南京试剂</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>2017</td>
<td>2018</td>
<td>2019</td>
<td>2017</td>
<td>2018</td>
<td>2019</td>
<td>2017</td>
<td>2018</td>
<td>2019</td>
<td></td>
</tr>
<tr>
<td>应收账款周转天数</td>
<td>21.82</td>
<td>26.03</td>
<td>28.7</td>
<td>59.2</td>
<td>58.6</td>
<td>72.4</td>
<td>21.01</td>
<td>/</td>
<td>22</td>
</tr>
<tr>
<td>存货周转天数</td>
<td>84.69</td>
<td>113.66</td>
<td>153.25</td>
<td>71.6</td>
<td>61</td>
<td>62.4</td>
<td>89.46</td>
<td>65.96</td>
<td>45.14</td>
</tr>
</tbody>
</table>
<p>![img](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image016.jpg)![img](file:////Users/xiaoxin1216/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image018.jpg)</p>
<p>图3-1 应收账款周转天数横向对比图         图3-2存货周转天数横向对比图</p>
<h3 id="1互联网潜力发挥公司资金流动性总体向好"><a class="markdownIt-Anchor" href="#1互联网潜力发挥公司资金流动性总体向好"></a> （1）“互联网+”潜力发挥，公司资金流动性总体向好</h3>
<p>根据表3-1可知，阿拉丁公司2017-2019年的应收账款周转率较快，周转天数年均不超过1个月，但周转天数有逐年增加的趋势，回款速度变慢，资产营运能力有所下降；和同行业相比，阿拉丁试剂回款速度持平（略低于）南京试剂，远高于泰坦科技等传统化工试剂提供商。</p>
<p>主要原因在于阿拉丁和南京试剂均通过用户直供、渠道经销和O2O电子商务等方式销售，不同于传统化工试剂企业走传统渠道与大型企事业单位签大体量订单、通过赊账促进销售，电商模式大部分为一次性支付，由此大大加快了应收账款的周转速度，为两家企业提供稳定的现金流。</p>
<h3 id="2产能扩大负面影响现金链存货周转天数显著增加"><a class="markdownIt-Anchor" href="#2产能扩大负面影响现金链存货周转天数显著增加"></a> （2）产能扩大负面影响现金链，存货周转天数显著增加</h3>
<p>公司的存货周转天数也有明显增加态势，在近两年高于行业平均天数，意味着企业对存货的管理效率较弱。从资产结构分析中也可看出，存货的占比增加，周转速度减弱，公司的流动资产利用效率变差。如前文所述，究其原因系公司扩张产品品类导致的部分滞销情况，是战略性调整带来的必然结果，但也在一定程度上增加了经营资本的需求，影响总资产的周转率和资金链的流动，需要引起重视。</p>
<h3 id="3固定资产利用率升高逐渐消弭2016年搬迁财务压力"><a class="markdownIt-Anchor" href="#3固定资产利用率升高逐渐消弭2016年搬迁财务压力"></a> （3）固定资产利用率升高，逐渐消弭2016年搬迁财务压力</h3>
<p>公司的固定资产周转天数则呈现逐年减少，说明公司的长期资产周转速度变快，其变现能力有所增强，长期资产利用率变高。联系到阿拉丁公司2016年厂房搬迁，可以认为其公司随着管理水平的增加对厂房、设备等的利用效率变高，企业经营风险减小。</p>
<h3 id="4-偿债能力分析"><a class="markdownIt-Anchor" href="#4-偿债能力分析"></a> 4. 偿债能力分析</h3>
<p>表4-1        2017-2019年偿债能力指标分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>烧钱率（万/平均月）</td>
<td>-1558</td>
<td>-1430</td>
<td>-1551</td>
</tr>
<tr>
<td>现金回收率（万/平均月）</td>
<td>1233</td>
<td>1667</td>
<td>1966</td>
</tr>
<tr>
<td>净烧钱率（万/平均月）</td>
<td>-325</td>
<td>237</td>
<td>415</td>
</tr>
<tr>
<td>流动比率</td>
<td>4.27</td>
<td>4.64</td>
<td>5.07</td>
</tr>
<tr>
<td>速动比率</td>
<td>2.77</td>
<td>2.37</td>
<td>2.54</td>
</tr>
<tr>
<td>资产负债比率</td>
<td>14.55%</td>
<td>11.43%</td>
<td>11.37%</td>
</tr>
<tr>
<td>股东权益比率</td>
<td>85.45%</td>
<td>88.57%</td>
<td>88.63%</td>
</tr>
</tbody>
</table>
<p>表4-2        2017-2019年偿债能力指标横向对比分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>阿拉丁</th>
<th style="text-align:right">泰坦科技</th>
<th>南京试剂</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>2017</td>
<td>2018</td>
<td style="text-align:right">2019</td>
<td>2017</td>
<td>2018</td>
<td>2019</td>
<td>2017</td>
<td>2018</td>
<td>2019</td>
<td></td>
</tr>
<tr>
<td>流动比率</td>
<td>4.27</td>
<td style="text-align:right">4.64</td>
<td>5.07</td>
<td>2.53</td>
<td>2.29</td>
<td>2.37</td>
<td>4.15</td>
<td>8.75</td>
<td>4.51</td>
</tr>
<tr>
<td>速动比率</td>
<td>2.77</td>
<td style="text-align:right">2.37</td>
<td>2.54</td>
<td>1.57</td>
<td>1.59</td>
<td>1.78</td>
<td>2.29</td>
<td>4.76</td>
<td>3.44</td>
</tr>
<tr>
<td>资产负债比率</td>
<td>14.55%</td>
<td style="text-align:right">11.43%</td>
<td>11.37%</td>
<td>35.71%</td>
<td>39.44%</td>
<td>38.26%</td>
<td>12.91%</td>
<td>7.12%</td>
<td>13.97%</td>
</tr>
</tbody>
</table>
<h3 id="1短期偿债能力好债务风险较小"><a class="markdownIt-Anchor" href="#1短期偿债能力好债务风险较小"></a> （1）短期偿债能力好，债务风险较小</h3>
<p>从表4-1中的净烧钱率看，阿拉丁公司在2018、2019两年已经实现了净烧钱率为正，且在逐年增加，表明公司的正向现金流比较稳定，抗风险能力强；也说明阿拉丁已经从烧钱的初创企业完成了在国内高端试剂电商赛道上的扎根。</p>
<p>分析表4-2偿债能力指标横向对比分析表，从流动比率看，阿拉丁公司的流动比率较大，行业内领先，其流动资产可以完全的覆盖流动负债，短期偿债压力较小。排除存货等流动性相对较慢的资产后计算得出速动比率虽略低于南京试剂，但仍保持在2.5以上，说明其仍能很好的覆盖流动负债，短期债务风险较小。</p>
<h3 id="2公司财务政策保守资产负债率低财务杠杆利用率低"><a class="markdownIt-Anchor" href="#2公司财务政策保守资产负债率低财务杠杆利用率低"></a> （2）公司财务政策保守，资产负债率低，财务杠杆利用率低</h3>
<p>通过表4-1可看出，化学试剂行业的资产负债比率普遍较低。阿拉丁公司的资产负债率处于行业内较低水平，且呈现逐年下降趋势，说明其负债所占比重远低于资产，财务杠杆利用率低，长期偿债风险小。</p>
<p>综上所述，公司流动比例和速动比例良好，现金充裕，流动稳定，且绝大多数由经营活动而来，说明阿拉丁的长期经营能力好。公司的长、短期偿债能力整体好，财务风险较小。</p>
<h2 id="三-发展能力"><a class="markdownIt-Anchor" href="#三-发展能力"></a> 三、发展能力</h2>
<p>根据杜邦分析的三因素分析法可知，影响公司净资产收益率的因素分别是销售净利率、总资产周转率及财务杠杆，通过对阿拉丁公司及同行业新三板另两家公司的三个驱动因素进行分别计算得到如下表5-1和5-2。</p>
<p>表5-1      2019年化学试剂行业内收益率驱动因素横向分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>阿拉丁</th>
<th>南京试剂</th>
<th>泰坦科技</th>
</tr>
</thead>
<tbody>
<tr>
<td>销售净利率</td>
<td>0.30</td>
<td>0.12</td>
<td>0.06</td>
</tr>
<tr>
<td>总资产周转率</td>
<td>0.56</td>
<td>1.33</td>
<td>1.48</td>
</tr>
<tr>
<td>权益乘数</td>
<td>1.13</td>
<td>1.16</td>
<td>1.62</td>
</tr>
<tr>
<td>资产收益率 （ROA）</td>
<td>16.88%</td>
<td>16.72%</td>
<td>9.50%</td>
</tr>
<tr>
<td>净资产收益率（ROE）</td>
<td>19.08%</td>
<td>19.40%</td>
<td>15.39%</td>
</tr>
</tbody>
</table>
<p>表5-2      2017-2019年阿拉丁净资产收益率驱动因素分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>销售净利率</td>
<td>0.25</td>
<td>0.32</td>
<td>0.30</td>
</tr>
<tr>
<td>总资产周转率</td>
<td>0.38</td>
<td>0.48</td>
<td>0.56</td>
</tr>
<tr>
<td>权益乘数</td>
<td>1.17</td>
<td>1.13</td>
<td>1.13</td>
</tr>
<tr>
<td>资产收益率 （ROA）</td>
<td>9.54%</td>
<td>15.29%</td>
<td>16.88%</td>
</tr>
<tr>
<td>净资产收益率（ROE）</td>
<td>11.16%</td>
<td>17.28%</td>
<td>19.08%</td>
</tr>
</tbody>
</table>
<h3 id="1-驱动因素横向比较高利润模式契合经营战略路线具有鲜明特色"><a class="markdownIt-Anchor" href="#1-驱动因素横向比较高利润模式契合经营战略路线具有鲜明特色"></a> 1. 驱动因素横向比较：高利润模式契合经营战略路线，具有鲜明特色</h3>
<p>从表5-1可以比较出阿拉丁公司与化学试剂行业内另两家新三板公司的异同，从而分析出其独有的经营战略。</p>
<p>首先，三家公司的净资产收益率（ROE）水平相似。从ROE的三个驱动因素看，泰坦科技对外部资金最为依赖，权益乘数明显高于另两家公司，其资产收益率（ROA）最低。</p>
<p>在销售净利率上，阿拉丁远远超过南京试剂和泰坦科技。相反，其总资产周转率远低于另外两家。结合前文应收账款周转天数、流动比率等指标可得，有别于传统化学试剂公司偏向传统渠道、薄利多销、赊账扩销的策略，阿拉丁主要定位于自主研发、毛利率高的高端化学试剂，通过电商直接对接分散的数百万科研人员，极高的单品毛利率弥补甚至完全消减了较小的体量和绝对收入带来的劣势。在未来公司发展上，阿拉丁应坚持开发核心技术，同时注重保护技术专利，进一步降低产品开发成本，在保持高毛利率水平的基础上扩张业务，这对未来公司上市估值也有重大的意义。</p>
<h3 id="2-驱动因素纵向比较管理层营运能力上升为主要驱动力"><a class="markdownIt-Anchor" href="#2-驱动因素纵向比较管理层营运能力上升为主要驱动力"></a> 2. 驱动因素纵向比较：管理层营运能力上升为主要驱动力</h3>
<p>从表5-2分析阿拉丁公司近三年经营成果和优劣势。公司销售净利率有先增后降的趋势，主要受净利润与收入变动影响，2018年收入与净利润增长率均有上升，而2019年当收入增长率下降时，公司成本仍较上年增加，导致净利润增长率大幅下滑，由2018年的67.11%下降至2019年的19.24%，从而导致销售净利率的下降；公司的权益乘数缓慢减小，说明公司的财务杠杆利用率降低，由上文分析也可得知公司的负债明显减少，主要靠经营活动产生现金流入为股东创造收益，公司的财务风险较小，但股东报酬率仍有提升。</p>
<p>相比之下，行业内较低的总资产周转率大幅上升。公司长期资产减少、资产周转天数加快，从而导致了总资产的周转率增大，驱动了净资产收益率的增加。因此我们得出，自从2016年搬迁之后，公司开始重视提升管理层的运营能力，扭转影响受益的最大劣势项。</p>
<h3 id="3-公司未来发展整体增速放缓新的盈利点有待发掘"><a class="markdownIt-Anchor" href="#3-公司未来发展整体增速放缓新的盈利点有待发掘"></a> 3. 公司未来发展整体增速放缓，新的盈利点有待发掘</h3>
<p>表6-1         2017-2019年增长率指标分析表</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>营业增长率</td>
<td>19.77%</td>
<td>31.46%</td>
<td>26.05%</td>
</tr>
<tr>
<td>利润增长率</td>
<td>55.24%</td>
<td>67.11%</td>
<td>19.24%</td>
</tr>
<tr>
<td>总资产增长率</td>
<td>4.58%</td>
<td>5.34%</td>
<td>7.20%</td>
</tr>
</tbody>
</table>
<p>由表6-1增长率指标分析表可知，公司的收入、利润增长遭遇瓶颈，过高的成本导致净利润的减少，而较低的财务杠杆利用率使得公司资金来源较少，一定程度上限制了公司的经营规模，导致收入的增速减缓；</p>
<p>公司的总资产规模扩大，主要系应收账款及存货的增加，但二者的增加具有两面性，赊销增加会导致公司的资产利用效率降低，坏账风险增加，存货的增加会增加管理的压力。</p>
<p>综合前文分析，由于所处科研试剂行业的增长红利，企业自身产品种类丰富，核心技术掌握全面，电商模式的先发优势等，认为阿拉丁公司未来前景良好。针对其近两年收入增速放缓的情况，主要指出三个问题：一，财务杠杆利用率偏低，财务政策偏向保守，扩张乏力，应该合理增加投融资活动，抓住时机适当扩张。二，期间费用仍过高，需进一步提高公司管理体系的效率，同时充分挖掘电商平台大数据优势，精细化运作。三，经营资金来源单一，收入增长陷入瓶颈。按照现在增长率指标，公司在较远的将来发展规模将难以再持续扩大，盈利增长模式还需再改善。18、19年积压的新产品的存货需要尽快释放，经历市场检验，在之后有计划、精准地控制存货量，尽可能降低存货带来的资金阻滞和成本提升；除了新系列产品得到市场回应后可能会增加企业营收外，公司近几年提出和加紧建设的“芯硅谷”耗材也是一个新的增长点，市场大、利润高。2019年的财报中的收入构成，实验耗材项目的收入仅占营收的2.89%，且相较前一年增幅不大，还处于起步阶段，有很大的提升空间。公司可以将耗材和实验试剂可以互为辅助为客户提供一站式的服务，打造双轮驱动业务结构，摊薄销售成本，激发企业新一轮盈利增长。</p>
<p>参考资料：</p>
<p>[1] 上海阿拉丁生化科技股份有限公司 2017 年年度报告</p>
<p>[2] 上海阿拉丁生化科技股份有限公司 2018 年年度报告</p>
<p>[3] 上海阿拉丁生化科技股份有限公司 2019 年年度报告</p>
<p>[4] 安信证券《阿拉丁：立足于科研高端试剂行业，上半年净利超3000万元》</p>
<p>[5] 兴业证券《国内试剂电商领先企业，产品进口替代有望持续推进》</p>
<p>[6] 华鑫证券《阿拉丁（830793）国内领先的高端科研试剂企业》</p>
<p>[7] 南京试剂（833179）年度报告</p>
<p>[8] 泰坦科技（835124）年度报告</p>
<p>[9] 阿拉丁公司官网信息</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/16/pdd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/16/pdd/" itemprop="url">pdd</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-16T18:52:08+08:00">
                2020-06-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  0
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/16/%E6%95%B0%E6%8D%AE%E5%BA%93peewee/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/16/%E6%95%B0%E6%8D%AE%E5%BA%93peewee/" itemprop="url">数据库之peewee+sqlite入门级练手</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-16T18:32:01+08:00">
                2020-06-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A7%91%E7%A0%94%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">科研笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>期末论文什么的告一段落，今天开始接触搭建数据库。</p>
<p>在试验中我使用了DB Browser for SQLite来可视化本地数据库，选择Peewee为ORM框架。选择的原因在上一篇文章中有所描述。</p>
<p>首先，作为一种ORM框架，Peewee中<code>Model</code>类、<code>fields</code>和<code>model实例</code>与数据库的映射关系如下：</p>
<p><strong>Model class—Database table</strong></p>
<p><strong>Field instance—Column on a table</strong></p>
<p><strong>Model instance—Row in a database table</strong></p>
<p>即一个Model类代表一个数据库的表，一个Field字段代表数据库中的一个字段，一个model类实例化对象则代表数据库中的一行</p>
<p>接下来进行一些简单语句的介绍。</p>
<h3 id="定义model-建立数据库"><a class="markdownIt-Anchor" href="#定义model-建立数据库"></a> 定义Model 建立数据库</h3>
<p>在使用的时候，根据需求先定义好Model，然后可以通过<code>create_tables()</code>创建表，若是已经创建好数据库表了，可以通过<code>python -m pwiz</code>脚本工具直接创建Model。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> peewee <span class="keyword">import</span> *</span><br><span class="line">db = SqliteDatabase(<span class="string">'quickstart.db'</span>)</span><br><span class="line">db.connect()</span><br><span class="line"><span class="comment">#连接数据库</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Material</span><span class="params">(Model)</span>:</span></span><br><span class="line">  name = CharField()</span><br><span class="line">  P1 = CharField()</span><br><span class="line">  P2 = BooleanField()</span><br><span class="line">  P3 = IntegerField()</span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">    database = db</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建表</span></span><br><span class="line">Material.create_table()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建表也可以这样, 可以创建多个</span></span><br><span class="line"><span class="comment"># database.create_tables([Person])</span></span><br></pre></td></tr></table></figure>
<p>如果建完之后，发现缺少了一列，可以使用playhouse 里migrate模块进行修改（增删更名）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> playhouse.migrate <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这是postgresql的，实例化出一个migrator对象</span></span><br><span class="line">db = SqliteDatabase(<span class="string">'quickstart.db'</span>)</span><br><span class="line">migrator = SqliteMigrator(db)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用migrate()执行一个或多个操作</span></span><br><span class="line"><span class="comment"># 添加了两个列，删除一个列</span></span><br><span class="line">title_field = CharField(default=<span class="string">''</span>)</span><br><span class="line">status_field = IntegerField(null=<span class="literal">True</span>)</span><br><span class="line">migrate(</span><br><span class="line">    migrator.add_column(<span class="string">'Material'</span>, <span class="string">'title1'</span>,title_field),<span class="comment">#‘Material表’‘新增title属性’ </span></span><br><span class="line">    migrator.drop_column(<span class="string">'Material'</span>, <span class="string">'title1'</span>,title_field),<span class="comment">#‘Material表’‘新增title属性’</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="对数据的操作"><a class="markdownIt-Anchor" href="#对数据的操作"></a> 对数据的操作</h3>
<h4 id="增加"><a class="markdownIt-Anchor" href="#增加"></a> 增加</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加一条数据</span></span><br><span class="line">p = Material(name = <span class="string">'The first'</span>,P1 = <span class="string">'good'</span>,P2 = <span class="number">0</span>,P3 = <span class="number">2</span>)</span><br><span class="line">p.save()</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法二insert</span></span><br><span class="line">p_id = Material.insert(&#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'The second'</span>,</span><br><span class="line">    <span class="string">'P1'</span> :<span class="string">'good'</span>,</span><br><span class="line">    <span class="string">'P2'</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">'P3'</span> : <span class="number">2</span></span><br><span class="line">&#125;).execute()</span><br><span class="line"><span class="comment">#打印出新插入数据的id</span></span><br><span class="line">print(p_id)</span><br><span class="line"></span><br><span class="line"><span class="comment">#插入很多数据，性能最好的是使用insert_many()</span></span><br><span class="line">NUM = <span class="number">10000</span></span><br><span class="line">data = [&#123;</span><br><span class="line">            <span class="string">'name'</span>: <span class="string">'123'</span></span><br><span class="line">        &#125; <span class="keyword">for</span> i <span class="keyword">in</span> range(NUM)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> database.atomic():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, NUM, <span class="number">100</span>):</span><br><span class="line">        <span class="comment"># 每次批量插入100条，分成多次插入</span></span><br><span class="line">        Material.insert_many(data[i:i + <span class="number">100</span>]).execute()</span><br></pre></td></tr></table></figure>
<h4 id="删除"><a class="markdownIt-Anchor" href="#删除"></a> 删除：</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用delete().where().execute()进行删除，where()是条件，execute()负责执行语句。若是已经查询出来的实例，则直接使用delete_instance()删除。</span></span><br><span class="line">Material.delete().where(Material.name == <span class="string">'A'</span>).execute()</span><br><span class="line"></span><br><span class="line">已经实例化的数据（有id了）, 使用delete_instance</span><br><span class="line"></span><br><span class="line">p.id = <span class="number">1</span></span><br><span class="line">p.save()</span><br><span class="line">p.delete_instance()</span><br></pre></td></tr></table></figure>
<h4 id="修改"><a class="markdownIt-Anchor" href="#修改"></a> 修改</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##已经实例化的数据,指定了id这个primary key,则此时保存就是更新数据</span></span><br><span class="line"></span><br><span class="line">p = Material(name = <span class="string">'New_name'</span>,P1 = <span class="string">'new'</span>,P2 = <span class="number">0</span>,P3 = <span class="number">2</span>)</span><br><span class="line">p.id = <span class="number">1</span></span><br><span class="line">p.save()</span><br></pre></td></tr></table></figure>
<h4 id="查询"><a class="markdownIt-Anchor" href="#查询"></a> 查询</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询单条数据</span></span><br><span class="line">p = Material.get(Material.id == <span class="number">1</span>)</span><br><span class="line">print(p.name, p.P1, p.P2,p.P3)</span><br><span class="line"><span class="comment">#使用where().get()查询</span></span><br><span class="line">p = Material.select().where(Material.name ==<span class="string">'The first'</span>).get()</span><br><span class="line">print(p.name, p.P1, p.P2,p.P3)</span><br><span class="line"><span class="comment">#查询多条数据</span></span><br><span class="line">persons = Material.select().where(Material.P2 ==<span class="number">0</span> ).get()</span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> Material:</span><br><span class="line">    print(p.name, p.P1, p.P2,p.P3)</span><br></pre></td></tr></table></figure>
<h4 id="统计-排序-limit"><a class="markdownIt-Anchor" href="#统计-排序-limit"></a> 统计、排序、limit</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询整张表的数据条数</span></span><br><span class="line">total_num = Material.select().count()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询name为liuchungui的Person数量, 返回数量为1</span></span><br><span class="line">num = Person.select().where(Person.name == <span class="string">'liuchungui'</span>).count()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按照P3大小排序</span></span><br><span class="line">Materials = Material.select().order_by(Material.P3.desc())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按照创建时间升序排序</span></span><br><span class="line">persons = Person.select().order_by(Person.create_time.asc())</span><br></pre></td></tr></table></figure>
<h4 id="查询符"><a class="markdownIt-Anchor" href="#查询符"></a> 查询符</h4>
<p><img src="/2020/06/16/%E6%95%B0%E6%8D%AE%E5%BA%93peewee/%E6%9F%A5%E8%AF%A2%E7%AC%A6%E5%8F%B7.png" alt="查询符号"></p>
<p><img src="/2020/06/16/%E6%95%B0%E6%8D%AE%E5%BA%93peewee/%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5.png" alt="条件语句"></p>
<p>其中，==、&lt;、&lt;=、&gt;、&gt;=、!=是很容易理解的，重点提下<code>&lt;&lt;</code>、<code>&gt;&gt;</code>和<code>%</code>。用示例说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &lt;&lt;使用，查询省份属于湖北和湖南的，对应sql语句：select * from person where province in ('湖南', '湖北')</span></span><br><span class="line">persons = Person.select().where(Person.province &lt;&lt; [<span class="string">'湖南'</span>, <span class="string">'湖北'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;&gt;使用，查询省份为空的，sql语句: select * from person where province is Null</span></span><br><span class="line">persons = Person.select().where(Person.province &gt;&gt; <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># %使用，查询省份中含有 湖 字，sql语句：select * from person where province like '%湖%'</span></span><br><span class="line">persons = Person.select().where(Person.province % <span class="string">'%湖%'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询湖南和湖北的, 注意需要用()将Person.province == '湖南'包一层</span></span><br><span class="line">persons = Person.select().where((Person.province == <span class="string">'湖南'</span>) | (Person.province == <span class="string">'湖北'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询湖南和身高1.75</span></span><br><span class="line">persons = Person.select().where((Person.province == <span class="string">'湖南'</span>) &amp; (Person.height == <span class="number">1.75</span>))</span><br></pre></td></tr></table></figure>
<p>最后，在我之前接到的需求中，我主要需要录入100+的对象（行），超过10+的属性（列），最终实现他们的网站上线等。</p>
<p>录入倒是不困难，需要再学习一下csv怎么直接通过 peewee导入到sqlite里面去。目前的想法是把csv转化成字典，再通过playground的字典-模型转换，导入到sqlite里面去。</p>
<p>上线的话，应该是需要一些前端知识。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/03/%E6%9C%80%E6%83%A8%E5%88%9B%E4%B8%9A%E8%80%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/03/%E6%9C%80%E6%83%A8%E5%88%9B%E4%B8%9A%E8%80%85/" itemprop="url">如何避免自己成为“最惨创业者”</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-03T18:46:48+08:00">
                2020-06-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%97%B2%E8%B0%88/" itemprop="url" rel="index">
                    <span itemprop="name">闲谈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天，一则《中国最惨创业者》的推文在我的朋友圈疯转。自称为最惨创业者的作者郭建，在文中讲述了被合伙人和投资者串通从一手创办的公司净身出户，还要背负对赌责任，银行卡被冻结、房子被查封的悲惨经历，痛骂投资者光鲜身份背后的阴险和肮脏，寻求读者道义上的支持。看完文章，我的心底一阵凉意。恰好本学期上了有关《公司法》的内容，学以致用，我尝试梳理他的经历，思考能否避免自身陷入这样的悲剧。</p>
<p><strong>稀里糊涂的股权架构设计</strong></p>
<p>在郭建叙述的故事中，他在成为最惨创业者路上的埋下的第一颗雷在雷龙科技的股权架构设计上。</p>
<p>股权架构是基于公司法的股权规则设计的，围绕创始人、合伙人、投资人等角色，通过公司控制权、决策权、分红权的分离，实现公司整体利益最大化。初始团队的股权架构设计关系到公司组织结构的稳定性。</p>
<p>尽管没有一种通用的架构能套在所有公司上，但有许多经验雷区是初创公司需要尤其注意的，例如股权均等、股权僵局等。前者会导致创业者失去实际控制权，后者将导致僵持双方一旦出现争执，投资人联合另一大股东，创始人可能被迫出局。因为股权架构设计不合理的前车之鉴比比皆是，例如爱多电器（45%，45%，10%），真功夫（50%，50%），首席娱乐官（60%，40%）等。</p>
<p>郭建的故事里，他在雷龙公司先后两次变更股权结构，都是死死地踩了雷。第一次，郭与前领导于任远在股权设计上采取均等形式，各占45%，拱手相让绝对控股权，在这一结构下，郭无法独自决定公司事务，两人一旦发生分歧就陷入僵局；第二次，投资人入伙持股20%（额外赋予一票否决权），郭持股36.5%，于任远持股33%，暂且不说这投资人与合伙人不清不白的关系，这种股权结构使得投资人与合伙人的持股和大于55%，使创业者完全丧失公司控制权。</p>
<p>匪夷所思的是，郭建创业前后10年，竟然没有在这些治理结构上有过任何怀疑或作出弥补措施。相比之下于任远的股权控制之术要高明很多。郭建被扫地出门之后，于任远不仅持股69.2%绝对控股，也是代持员工股权的杭州雷联科技有限公司的法定代表人。</p>
<p><strong>对赌协议的坑在哪？</strong></p>
<p>第二枚雷埋在融资附带的对赌协议中。</p>
<p>在郭的故事里，对赌协议是2014年公司引进融资时签署的。投资方允诺投资2600万，稀释股权到20%，代价是签署业绩对赌条款，3年内上市或者被合格并购，否则要求郭、于个人回购所有股权。这似乎是无可厚非的。对赌协议的实质是用来协调估值天平的砝码，因为往往在融资博弈时，创业者会要求更高的估值，在信息不对等的情况下，投资人只能冒较大风险选择相信创业者提供的信息及要求的估值，但用单方的对赌来保护自己。对赌有明确的执行步骤，制定上又几乎无所拘束，遵循着你商我量、你情我愿的原则。在中国实体企业融资难的环境下，对赌协议的使用其实已经非常普遍。统计显示，近三年上司公司及创投领域的资本交易达到十万亿级别，其中涉及到对赌的就有达万亿级。</p>
<p>回到郭的故事中，当时科发创投给出的2600万投资对于14年刚刚起步的雷龙科技显然是高额估值，那么投资者必定有高额回报的期待，通过对赌来降低投资风险似乎是无可厚非。</p>
<p>真正的雷是对赌协议中的责任主体。根据书面协议的约定，回购义务人明确是郭、于个人而非公司，甚至都没有提及他们当时在公司的职务和身份。因此即使郭的股权转让、离开公司后，他本人作为自然人，依旧是回购义务人。就是这个小细节，使整个对赌协议的性质就变了。我猜想，郭建在事发之前一定都不记得有这茬事，甚至他当时可能都没看具体对赌协议的条例，只查得个法律概念，自认为是标准化的流程，就盲目允诺了。</p>
<p>这让我想起周淳老师课上一再强调的一点，公司法不是万能的。具体商业事件千差万别，公司法不能做到全方位保驾护航。做到无所疏漏，更多是靠利益双方主动达成协议，提前制定章程。如果郭建认识到这点，当时能在对赌协议中增添例如“公司实际控制人”、“总经理”等身份称谓，或者“以所持股份为限”等补充义务的限度，事情就会不一样了。可惜，郭因为没有这个意识，反而自己脑补出一个“完美保护伞”的公司法印象，最终栽了跟头。</p>
<p><strong>背了一口锅</strong></p>
<p>第三个雷藏在郭以股权转让方式退出雷龙科技的时候。这也恰是郭建最受委屈的地方。在他那个“完美保护伞”的假设里，自己不是股东了、不是经理了，自然和公司两不相欠。——这自然也是他想多了。由于他所负债务是个人债务，同时没有进行任何主动的书面免除回购义务，这笔债也不会自动免去。关于这一点，郭在文章中为自己辩驳，说合伙人于任远口头上答应了他股权债务可以免，让人顿然无语。</p>
<p><strong>如何避免自己成为“中国最惨创业者”</strong></p>
<p>从整个事件的调性上，会感觉郭始终处于法盲一般懵懂鲁莽而又自以为是的状态。总结他创业失败经验，对于创业者的启示无非就是以下三点：</p>
<p>一，非常基本的常识，任何人的空口承诺不可信，所有程序要以书面形式进行。</p>
<p>二，对于有资本战略规划的公司一定要设计合理的股权架构。切记公平的利益分配都是表面的，保证自己控制权才是本质。股权架构是一个动态博弈，在创业的每个阶段，关于控制权这根弦一定要绷紧。</p>
<p>三，面对对赌协议需绝对慎重。首先，我个人不是很喜欢经常使用对赌协议的投资者，很不大气。风险投资的核心是风险，优秀的投资机构应该通过专业的投资能力和投资眼光，来对冲投资的风险。如果遇到非要使用对赌协议的投资情况，创业者应该加以重视、保护自己，在审核修改对赌条款时需要尽可能关注语言表述细节，可以利用多重方式缩减自身在对赌条款下的风险曝露。例如：合理设置对赌触发条件，对赌业绩可以在约定具体数额的基础上，加上一定的上下浮动空间；细化免责条款，尽可能覆盖公司可能面对的不可抗力、市场风险和政策风险；为补偿“封口”， 优先选择以所持公司股权而不是现金进行补偿，避免对赌补偿义务成为夫妻共同债务（前车之鉴：小马奔腾）等……创业者需要明白对赌协议的安排是个性化的，应基于交易双方的情况勇敢且理性地博弈。</p>
<p><strong>最惨创业者？最佳普法员</strong></p>
<p>由于故事中“一口气投2600万”，“刚一轮融资就对赌三年上市”这些情形都过于冲击常识，我特意去搜了一下这家公司的背景、经营业务以及相关新闻。我发现这家所谓雷龙科技其实是在做学生贷之类的P2P产品（瞬间最后一点同情都没了）。13年左右正是P2P的风口，大量资本以 “名股实债”的对赌融资形式涌入。郭建因抓住P2P红利，攫取了巨大的利益。14年过后，随着P2P行业的衰退，各种矛盾开始爆发，大潮退去，终会有浪花来替它谢罪。郭建的遭遇也只不过是其中的一朵罢了。</p>
<p>没有创业史会记住这个创业者，因为他也没创出个所以然来。只有普法工作者会拿着他这篇极具感染力和传播力的文章不断教育企业家，签合同前一定要问问律师！融资的时候一定要找律师啊！</p>
<p>附：《中国最惨创业者》<a href="https://mp.weixin.qq.com/s/0RE9qjGNoyuCjzpKMiCL4A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/0RE9qjGNoyuCjzpKMiCL4A</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/31/Python%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E6%80%BB%E7%BB%93%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/31/Python%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E6%80%BB%E7%BB%93%20/" itemprop="url">Python数据库学习路径总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-31T10:49:11+08:00">
                2020-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A7%91%E7%A0%94%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">科研笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="写在前面"><a class="markdownIt-Anchor" href="#写在前面"></a> 写在前面</h3>
<p>用Python做项目的时候经常会遇到管理数据的需求。常见的方式是用文件保存数据，还有 <strong>pickle</strong>、<strong>csv</strong> 等模块辅助。但对于稍微复杂一点的数据，往往不够方便。成熟的解决方案就是使用<strong>数据库</strong>。</p>
<p>本文我将收集一下学习Python数据库所涉及到的一些基本概念和学习路径，选择一条最适合我需求的路径。</p>
<h3 id="方式一学习sql语言使用mysql数据库或sqlite并使用pymysql库用python操作数据库"><a class="markdownIt-Anchor" href="#方式一学习sql语言使用mysql数据库或sqlite并使用pymysql库用python操作数据库"></a> 方式一：学习SQL语言，使用MySQL数据库（或Sqlite），并使用PyMySQL库用Python操作数据库。</h3>
<p>提到数据库，首先想到的自然是大名鼎鼎的数据库SQL语句，在正经的开发中应用很多。使用数据库的 <strong>SQL 语句</strong>几乎相当于再学一种新的语言。虽然 <strong>sqlite</strong>、<strong>pymysql</strong> 等模块提供了与数据的连接，但仍然需要自己去拼接 SQL 语句。</p>
<h4 id="sql语言"><a class="markdownIt-Anchor" href="#sql语言"></a> SQL语言</h4>
<blockquote>
<p>结构化查询语言(Structured Query Language)简称SQL，是一种特殊目的的编程语言，是一种数据库查询和设计语言，用于存取数据以及查询、更新和管理关系数据库系统.</p>
</blockquote>
<p>简而言之，SQL就是一种脚本编程语言，是绝大多数数据库（例如MYSQL、Oracle）的通用语言。</p>
<ul>
<li>SQL 面向数据库执行查询</li>
<li>SQL 可在数据库中插入新的记录</li>
<li>SQL 可更新数据库中的数据</li>
<li>SQL 可从数据库删除记录</li>
<li>SQL 可在数据库中创建新表</li>
<li>SQL 可在数据库中创建视图</li>
</ul>
<h4 id="数据库软件mysqlsqlite"><a class="markdownIt-Anchor" href="#数据库软件mysqlsqlite"></a> 数据库软件：MySQL/Sqlite…</h4>
<p>MySQL是在90年代中期开发的数据库软件，是市场上第一个可用的开源数据库之一。MySQL是一种RDBMS，它允许保持数据库中存在的数据。MySQL适用SQL结构化查询语言用于访问，更新和操作数据库中的数据。</p>
<p>对于数据量较小，访问量较小的需求，甚至都不需要能承受高并发访问的大内存MySQL，可以只用SQLite，它的特点是轻量级、可嵌入，但不能承受高并发访问，适合桌面和移动应用。Python就内置了SQLite3，所以，在Python中使用SQLite，不需要安装任何东西，直接使用。</p>
<p>由于Python的准数据库接口DB-API定义都是通用的，所以，操作不同数据库的代码和方式都类似。</p>
<h4 id="pymysql"><a class="markdownIt-Anchor" href="#pymysql"></a> PyMySQL</h4>
<p>PyMySQL是在 Python3.x 版本中用于连接 MySQL 服务器的一个库。</p>
<h4 id="与python自带库pandas对比"><a class="markdownIt-Anchor" href="#与python自带库pandas对比"></a> 与Python自带库Pandas对比</h4>
<p>Pandas是Python领域强大的数据处理与分析的类库，与SQL类似，两者都是对“表格型”数据的操作和查询，所以很多语法都能对应起来，例如<strong>SELECT数据查询，WHERE按条件查询，in和not in的条件查询，groupby分组统计，JOIN数据关联，UNION数据合并，Order Limit先排序后分页，取每个分组group的top n，UPDATE数据更新，DELETE删除数据</strong> …</p>
<h3 id="方式二用orm方法操作轻量级数据库学习peewee库"><a class="markdownIt-Anchor" href="#方式二用orm方法操作轻量级数据库学习peewee库"></a> 方式二：用ORM方法操作轻量级数据库，学习peewee库</h3>
<p>学习SQL语句的时间成本通常很高，原生 SQL 的过程非常繁琐，代码重复，没有面向对象思维，在实际开发中，如无特殊需求，一般不会直接写 SQL，而是用更为方便的 <strong>ORM（对象关系映射，Object Relational Mapping）<strong>框架。ORM是将</strong>关系型数据库</strong>与 Python 中的<strong>对象</strong>关联起来，提供了一种操作数据的简便方式，相当于对数据库加了一层更友好的接口，有了 ORM 不再需要写 SQL 语句。同时兼容多种数据库系统，如sqlite, mysql、postgresql，付出的代价可能就是性能上的一些损失。</p>
<p>目前 Python 中比较流行的 ORM 解决方案有三种：<strong>Django ORM</strong>（使用方便，但很难脱离 Django 单独使用。）<strong>SQLAlchemy</strong>（功能强大，成熟可扩展，但学习门槛较高。）<strong>peewee</strong>（轻量，可扩展，易学习，但功能有限。）对于偏初级的小型项目，通常用不到很复杂的功能，就可以选择peewee库。</p>
<h4 id="peewee"><a class="markdownIt-Anchor" href="#peewee"></a> peewee</h4>
<p>学习peewee的官方文档：<a href="http://docs.peewee-orm.com/en/latest/index.html" target="_blank" rel="noopener">http://docs.peewee-orm.com/en/latest/index.html</a></p>
<h3 id="方式三使用非关系型数据库"><a class="markdownIt-Anchor" href="#方式三使用非关系型数据库"></a> 方式三：使用非关系型数据库</h3>
<p>对于数据存储还有一种解决方案，就是使用非关系型数据库。</p>
<p>以上提到的都是关系型数据库，虽然很好，但是随着互联网大规模的爆发，弱点也越来越明显，比如事务的一致性，多表联查，高并发等等瓶颈很明显。于是<strong>NoSQL</strong>一词横空出世，数据结构由键值(key=&gt;value)对组成，结构不固定，每一个元组可以有不一样的字段，每个元组可以根据需要增加一些自己的键值对，这样就不会局限于固定的结构，可以减少一些时间和空间的开销。</p>
<p>比如<strong>MongoDb</strong>就是典型的NoSQL型数据库。MongoD是非关系型数据库，也叫<strong>文档型数据库</strong>（即可以存放xml、json、bson类型的数据），是一种NoSQL的数据库。对于简单的数据存储来说，它有个巨大的优势就是<strong>同 Python 内置的 dict、list 等类型兼容良好</strong>，可以直接存取，让你甚至感觉不到有数据库的存在，也根本无需关心 SQL 语句。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/18/%E7%AE%A1%E9%81%93%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/18/%E7%AE%A1%E9%81%93%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%88%86%E6%9E%90/" itemprop="url">文献：管道可靠性分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-18T10:49:11+08:00">
                2020-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A7%91%E7%A0%94%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">科研笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="论文1"><a class="markdownIt-Anchor" href="#论文1"></a> 论文1</h3>
<p><em><strong>Alimi L, Chaoui K. Reliability Study of HDPE Pipe Using Slow Crack Growth Model[J].</strong></em></p>
<h4 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h4>
<p>现在有多种预测HDPE寿命模型，彼此之间没有很大的共识，有些特定的参数也不是非常确切。尽管塑料管材标准及其相关的实验室测试也规定了超过50年的安全结构使用寿命，但是可靠性方法仍然是评估剩余结构寿命的一种安全方法。</p>
<p>这项研究涉及基于寿命估计模型的高密度聚乙烯（HDPE）管可靠性计算。用慢速裂纹扩展（SCG）模型与极限状态函数结合以获得表示失效概率的可靠性指标（β）。与钢质管道相比，塑料管道在此问题上的投入很少。</p>
<h4 id="顺序"><a class="markdownIt-Anchor" href="#顺序"></a> 顺序</h4>
<ul>
<li>
<p>物理模型搭建：</p>
<p>借鉴P.Hutar的文章用Paris公式解释SCG动力学特征</p>
<p>![](管道可靠性分析/屏幕快照 2020-05-17 下午11.50.54.png)</p>
</li>
<li>
<p>可靠性分析</p>
<ul>
<li>定义结构的性能函数（极限函数），用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(X_j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>表示，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">X_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>是随机变量。这个方程说明了安全裕度，该裕度由管道商推荐寿命（通常大于50年）和实际计算的寿命之间的差定义。即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>=</mo><msub><mi>t</mi><mi>R</mi></msub><mo>−</mo><msub><mi>t</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">G=t_R-t_f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9011879999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>失效概率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>f</mi></msub><mo>=</mo><mi>P</mi><mo stretchy="false">[</mo><mi>G</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mo>=</mo><mn>0</mn><mo stretchy="false">]</mo><mo>=</mo><mi>ϕ</mi><mo stretchy="false">(</mo><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P_f=P[G(X)&lt;=0]=\phi(-\beta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">[</span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mclose">)</span></span></span></span> 中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo stretchy="false">[</mo><mi>G</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mo>=</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">P[G(X)&lt;=0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">[</span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span> 是概率算子，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo stretchy="false">(</mo><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\phi(-\beta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mclose">)</span></span></span></span>是累积高斯概率函数，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>是可靠性指标。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo stretchy="false">[</mo><mi>G</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mo>=</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">P[G(X)&lt;=0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">[</span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span> 可以由基于FORM/SORM有限元计算的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>H</mi><mi>I</mi><mi>M</mi><mi>E</mi><mi>C</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">PHIMECA</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">A</span></span></span></span>软件计算得出。</li>
</ul>
</li>
<li>
<p>对各变量对应的可靠性指数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span> 进行分别分析，作图，找安全范围</p>
<ul>
<li>随裂纹长度的变化</li>
</ul>
<p>![](管道可靠性分析/屏幕快照 2020-05-18 上午10.48.28.png)</p>
<ul>
<li>材料指数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span></li>
</ul>
<p>![](管道可靠性分析/屏幕快照 2020-05-18 上午10.48.34.png)</p>
<ul>
<li>随施加应力</li>
</ul>
<p>![](管道可靠性分析/屏幕快照 2020-05-18 上午10.48.43.png)</p>
</li>
<li>
<p>结论</p>
<ul>
<li>基于SCG的塑料管的可靠性随着裂纹长度，压力和指数m的增加而降低</li>
<li>可以得出不同壁厚的某种管材，在一定的初始裂纹下，承受压力的安全范围</li>
</ul>
</li>
</ul>
<hr>
<h3 id="论文3"><a class="markdownIt-Anchor" href="#论文3"></a> 论文3</h3>
<p><strong>Alimi L, Chaoui K, Amirat A, et al. Study of reliability index for high-density polyethylene based on pipe standard dimension ratio and fracture toughness limits[J]. The International Journal of Advanced Manufacturing Technology, 2018, 96(1-4): 123-136.</strong>*</p>
<p>评论：与上一篇文章类似，把失效概率中的概率算子的变量换成了<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>I</mi></msub></mrow><annotation encoding="application/x-tex">K_I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，即安全裕度由材料的临界断裂韧度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>I</mi></msub><mi>c</mi></mrow><annotation encoding="application/x-tex">K_Ic</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span></span></span></span>与实际值之间的差异定义。模拟了可靠性指数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>对工作压力、裂纹长度和SDR三个参数的函数。</p>
<p>以上两篇文章在进行可靠性分析时都用到了phimeca软件，再来介绍一下这款软件</p>
<hr>
<h3 id="论文3-2"><a class="markdownIt-Anchor" href="#论文3-2"></a> 论文3</h3>
<p><em><strong>Lemaire, Maurice, and Maurice Pendola. Phimeca-soft.&quot;Structural safety 28.1-2 (2006): 130-149.</strong></em></p>
<p>该软件基于<em>FORM/SORM</em>可靠性计算，原理如下图</p>
<p><img src="/2020/05/18/%E7%AE%A1%E9%81%93%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%88%86%E6%9E%90/1-s2.0-S0167473005000196-gr1.jpg" alt></p>
<p>接下来用一个应用例子来介绍它：</p>
<h5 id="背景"><a class="markdownIt-Anchor" href="#背景"></a> 背景</h5>
<p>排气歧管在损坏和漏气之前的寿命取决于几个参数：几何形状，与发动机的组装、材料特性、温度以及机械负载条件。制造过程和客户的多样性在这些参数值中引入了很大的可变性，影响了排气歧管的故障风险。</p>
<p>传统上，在寿命评估或结构抗力的合理性中不考虑这些可变性的来源。这项工作的目的是<strong>将这种不确定性引入歧管的预测行为模型中</strong>，以便通过使用形式方法的“可靠性指标”计算来确定失效的可能性。</p>
<h5 id="歧管介绍"><a class="markdownIt-Anchor" href="#歧管介绍"></a> 歧管介绍</h5>
<p>歧管承受热负荷和机械负荷。我们使用具有大约200,000个节点的有限元模型并执行耦合的非线性热力和机械分析来模拟歧管的结构行为。由此分析可以得出有关整个结构的应力和温度的变化情况。</p>
<h5 id="引入随机量"><a class="markdownIt-Anchor" href="#引入随机量"></a> 引入随机量</h5>
<p>不确定的参数涉及：</p>
<ul>
<li>
<p>在最大和最小发动机功率下废气的温度<span class="katex-error" title="ParseError: KaTeX parse error: Got function &#039;\max&#039; with no arguments as subscript at position 3: T_\̲m̲a̲x̲">T_\max</span>和<span class="katex-error" title="ParseError: KaTeX parse error: Got function &#039;\min&#039; with no arguments as subscript at position 3: T_\̲m̲i̲n̲">T_\min</span>，两个温度都会影响一个循环中的热和机械性能。</p>
</li>
<li>
<p>用于制造歧管的内核位置：由于制造过程<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi><mo separator="true">,</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">dx,dy,dz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span> ，该位置在三个方向上独立变化。这会导致厚度过大或过低，从而可能重新分配整个结构的热和机械负载。</p>
</li>
<li>
<p>材料特性（杨氏模量<em>ë</em>，屈服应力<em>σ</em> <em>ÿ</em>和从推导出极限强度<em>σ</em> <em>ý</em>取决于温度以及用于寿命的估计疲劳性能的损坏系数考虑恒定塑料模量）</p>
</li>
</ul>
<p>已经确定了在特定温度下材料性能的平均值和标准偏差。为了获得每个温度下的随机性，物理随机变量的实现定义为</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>x</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>u</mi><mi>X</mi></msub><msub><mi>σ</mi><mi>X</mi></msub><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x(T)=mx(T)+u_X\sigma_X(T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span></p>
<p>将包含相关性的九个随机变量引入有限元模型和预测的循环数中。</p>
<h5 id="结果"><a class="markdownIt-Anchor" href="#结果"></a> 结果</h5>
<p>用PHIMECA进行计算后，对于所有上述可变性源，获得的故障概率为1.3％，对应可靠性指标<em>β</em> 为2.24。换句话说，在考虑了机械模型并引入了可变性之后，有1.3％的测试歧管将无法通过严格性测试。同时，如下图，phimeca-soft还给出的重要性因子，确定所有随机变量的影响力，决定应该改进的部分</p>
<p><img src="/2020/05/18/%E7%AE%A1%E9%81%93%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%88%86%E6%9E%90/1-s2.0-S0167473005000196-gr10.jpg" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%99%BA%E8%83%BD%E6%B1%BD%E8%BD%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%99%BA%E8%83%BD%E6%B1%BD%E8%BD%A6/" itemprop="url">基于人工智能的汽车智能故障诊断系统设计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-16T23:41:41+08:00">
                2020-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A7%91%E7%A0%94%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">科研笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  24
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="项目背景及意义"><a class="markdownIt-Anchor" href="#项目背景及意义"></a> <strong>项目背景及意义</strong></h3>
<p>“智能+工业”不仅是我国的一个发展战略需求，也是人工智能的热门应用方向之一。智能汽车是一种新型高科技汽车，借助人工智能实现用车保养和零件检测的自动化将会极高地提升车辆的安全程度。除了自动驾驶等智能汽车技术外，特斯拉、宝马等企业正还准备使用人工智能升级以往的车辆故障检测系统，希望实现自动寻找检测汽车某些部件的损坏情况，以便在潜在故障发生之前就对车辆进行检测和维修，甚至在发现问题之后，配合自动驾驶系统让车辆自行驾驶至服务中心。</p>
<p>本文中我们将采用使用人工智能的方法构建一套模型，通过智能汽车内零部件传感器的数据，运用机器学习进行建模分析，构建一套汽车智能故障诊断系统，从而帮助车厂判断汽车的健康状况。</p>
<h3 id="相关概念"><a class="markdownIt-Anchor" href="#相关概念"></a> <strong>相关概念</strong></h3>
<h4 id="汽车传感器智能汽车的感知和计算"><a class="markdownIt-Anchor" href="#汽车传感器智能汽车的感知和计算"></a> 汽车传感器：智能汽车的感知和计算</h4>
<p>传感器是一种检测装置，能够感受到被测量的信息，并能将感受到的信息按照一定规律转变为电信号或其他所需形式的信息输出，满足信息的传输、处理、存储、显示、记录和控制等要求。汽车传感器可分为车辆感知、环境感知两大类。动力、底盘、车身及电子电气系统中的传感器属于车辆感知范畴，ADAS 以及无人驾驶系统中引入的车载摄像头、毫米波雷达、激光雷达等属于环境感知范畴。传感器作为智能汽车感知环境的硬件基础，在智能驾驶发展过程中起着重要作用[<a href="#_edn1">i]</a>。</p>
<p>![智能汽车传感系统](机器学习智能汽车/图片 1.png)</p>
<p>本项目中，我们可以借助车辆感知大类的传感器收集汽车运行中的各种工况信息，如车速、各种介质的温度、发动机运转工况、各部位压力等。将他们转化成电讯号输给计算机，远程分析车辆的健康状况。</p>
<h4 id="机器学习"><a class="markdownIt-Anchor" href="#机器学习"></a> <strong>机器学习</strong></h4>
<p>机器学习是一门涉及多领域的交叉学科，其研究内容涉及概率论，统计学，算法复杂度，线性代数，微积分等众多领域。机器学习研究的是计算机如何模拟人类的学习行为，从相应的数据中学习到一定的规律，并能够对新的数据进行分析。目前十分火热的深度学习就是机器学习的一个分支，机器学习在众多现代计算机 领域有着十分重要的作用，比如图像处理，语音识别，自然语言处理等等。机器学习分监督学习，无监督学习，半监督学习。使用机器学习可以对数据进行分类，回归等等分析。常用的机器学习算法有:线性回归，逻辑斯蒂回归，cart 决策树，随机森林，Adaboosting，bagging，SVM，k-means，PCA等等算法。本文将通过集成学习的方法，同时根据实际业务问题调整阈值，对车辆传感器的数据进行分析，确保将健康状况不良好的汽车即使召回。</p>
<h3 id="汽车传感器数据分析"><a class="markdownIt-Anchor" href="#汽车传感器数据分析"></a> <strong>汽车传感器数据分析</strong></h3>
<h4 id="数据探索和方法选择"><a class="markdownIt-Anchor" href="#数据探索和方法选择"></a> 数据探索和方法选择</h4>
<p>我手上的训练集共有60000条训练样本，测试集共有16000条训练样本。每个数据一共有171个特征，由于数据提供方的原因，数据的特征是匿名的。其中有的特征是数值连续特征，有的特征是对数据特征进行了histograms处理。缺失数据表示为NaN。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 导入依赖库</span><br><span class="line">from matplotlib import pyplot as plt</span><br><span class="line">%matplotlib inline</span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">import warnings</span><br><span class="line">warnings.filterwarnings(&quot;ignore&quot;)</span><br><span class="line">#加载数据</span><br><span class="line">train &#x3D; pd.read_csv(&#39;train_set.csv&#39;,na_values&#x3D;&#39;na&#39;)</span><br><span class="line">test &#x3D; pd.read_csv(&#39;test_set.csv&#39;,na_values&#x3D;&#39;na&#39;)</span><br><span class="line">#查看数据的shape</span><br><span class="line">print(&#39;训练集的形状：&#123;&#125;&#39;.format(train.shape))</span><br><span class="line">print(&#39;测试集的形状：&#123;&#125;&#39;.format(test.shape))</span><br><span class="line"></span><br><span class="line"># TODO：打印train前五行数据</span><br><span class="line">train.head()</span><br><span class="line"># TODO：打印test前五行数据</span><br><span class="line">test.head()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%99%BA%E8%83%BD%E6%B1%BD%E8%BD%A6/2.png" alt="前5行数据的部分特征"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># TODO：查看train数据中class这列的类别比例</span><br><span class="line">pd.value_counts(train[&#39;class&#39;])</span><br></pre></td></tr></table></figure>
<p>通过查看数据类别，我发现训练集共60000个样本中，有59000条是正常样本，只有1000条是故障车辆样本。此问题是一个典型的样本不均衡问题，对于这种非常不均衡的问题一般有两种解决思路：</p>
<p>（1）使用异常值检测的方法：将少类的样本看作异常值</p>
<p>（2）使用监督学习的方法，看作分类问题。</p>
<p>本文中我将使用监督学习的方法来对他们进行建模。</p>
<h4 id="数据预处理"><a class="markdownIt-Anchor" href="#数据预处理"></a> 数据预处理</h4>
<p>对于传感器的原始数据数据，我按顺序进行以下预处理:</p>
<h5 id="区分特征值和标签"><a class="markdownIt-Anchor" href="#区分特征值和标签"></a> 区分特征值和标签</h5>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 将特征和标签划分开</span><br><span class="line"># 在这一步中我们将把feature和label分开</span><br><span class="line">train_feature  &#x3D; train[train.columns.difference([&#39;class&#39;])]</span><br><span class="line">train_label &#x3D; train[&#39;class&#39;]</span><br><span class="line"></span><br><span class="line">test_feature  &#x3D; test[test.columns.difference([&#39;class&#39;])]</span><br><span class="line">test_label &#x3D; test[&#39;class&#39;]</span><br></pre></td></tr></table></figure>
<h5 id="区分数据特征类型"><a class="markdownIt-Anchor" href="#区分数据特征类型"></a> 区分数据特征类型：</h5>
<p>如前文所述，传感器数据分为两类，一类是数值特征，一类是通过直方图得到的分布特征。由于直方图类数据在特征选择时要进行特殊的处理，因此第一步是通过通过正则表达式，自动匹配这类分布特征的字段类型，进行查找和筛选。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">pattern &#x3D; re.compile(&#39;[a-z]*_001&#39;)</span><br><span class="line">col_bin_name &#x3D; [re.findall(pattern,char) for char in train_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">bin_name_lst &#x3D; []</span><br><span class="line">for col in col_bin_name:</span><br><span class="line">    pattern &#x3D; re.compile(col[0][:2]+&#39;_[0-9]*&#39;)</span><br><span class="line">    find_name &#x3D; [re.findall(pattern,char) for char in train_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">    bin_name_lst.append(np.concatenate(find_name,axis&#x3D;0))</span><br><span class="line">    print(find_name)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%99%BA%E8%83%BD%E6%B1%BD%E8%BD%A6/3.png" alt="打印出所有直方图类的特征"></p>
<h5 id="标签数据转换"><a class="markdownIt-Anchor" href="#标签数据转换"></a> 标签数据转换：</h5>
<p>neg意味着汽车的健康状况为良好，不需要检修；pos为状况不良，需要检修。为了便于计算，我将neg标签转换为0，pos标签转换为1。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">train_label &#x3D; train_label.map(&#123;&#39;pos&#39;:1,&#39;neg&#39;:0&#125;)</span><br><span class="line">test_label &#x3D; test_label.map(&#123;&#39;pos&#39;:1,&#39;neg&#39;:0&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="数据缺失值填充"><a class="markdownIt-Anchor" href="#数据缺失值填充"></a> 数据缺失值填充：</h5>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># TODO：统计训练集和测试集分别有多少行有缺失</span><br><span class="line">print(&#39;训练集缺失&#39;,(train.isnull().sum(axis&#x3D;1)&gt;0).sum(),&#39;行&#39;)</span><br><span class="line">print(&#39;训练集缺失&#39;,(train.isnull().sum(axis&#x3D;0)&gt;0).sum(),&#39;列&#39;)</span><br><span class="line"># TODO：统计训练集和测试集分别有多少列有缺失</span><br><span class="line">print(&#39;测试集缺失&#39;,(test.isna().sum(axis&#x3D;1)&gt;0).sum(),&#39;行&#39;)</span><br><span class="line">print(&#39;测试集缺失&#39;,(test.isnull().sum(axis&#x3D;0)&gt;0).sum(),&#39;列&#39;)</span><br></pre></td></tr></table></figure>
<p>对数据进行缺失值的分析，发现训练集共缺失 59409 行，169 列；测试集缺失 15835 行，169 列。可以判断有大量的缺失值，因此不能进行简单地丢弃，而是需要进行填充。填充的方法有均值填充和模型填充。在计算效果上，模型填充更优，但计算量较大。此处我们使用均值填充。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 使用训练集的均值进行填充</span><br><span class="line">for col in train_feature.columns:</span><br><span class="line">    train_feature[col] &#x3D; train_feature[col].fillna(train_feature[col].mean())</span><br><span class="line"></span><br><span class="line">for col in test_feature.columns:</span><br><span class="line">    test_feature[col] &#x3D; test_feature[col].fillna(train_feature[col].mean())</span><br></pre></td></tr></table></figure>
<h5 id="特征工程"><a class="markdownIt-Anchor" href="#特征工程"></a> 特征工程：</h5>
<p>虽然大部分的数据都只有匿名的特征，但仍然可以对直方图特征做一些特征的抽取工作。对于直方图特征，可以想象，每个直方图的bins的和表示了这个车辆检查这个特征的次数，那么显然这个数字的和越大就代表这个车子检查这个特征的次数越多，也间接的表明了这个车子到目前为止的使用寿命；直方图表示了这个特征的分布，可以通过JS散度和推土机距离来度量分布之间的距离来成为一个新的特征。因此本项目中，我选择以下几种基准分布：</p>
<p>（1）正样本的每个直方图特征的均值分布。</p>
<p>（2）负样本的每个直方图特征的均值分布。</p>
<p>（3）一个正态分布。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">## 特征抽取一：</span><br><span class="line">train_feature_extract &#x3D; pd.DataFrame(index&#x3D;train_feature.index)</span><br><span class="line">for index,col in enumerate(col_bin_name):</span><br><span class="line">    pattern &#x3D; re.compile(col[0][:2]+&#39;_[0-9]*&#39;)</span><br><span class="line">    find_name &#x3D; [re.findall(pattern,char) for char in train_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">    name &#x3D; &#39;sum_bins_&#39;+str(index)</span><br><span class="line">    train_feature_extract[name] &#x3D; train_feature[np.concatenate(find_name,axis&#x3D;0)].sum(axis&#x3D;1)</span><br><span class="line">train_feature_extract[&#39;bins_max&#39;] &#x3D; train_feature_extract.max(axis&#x3D;1)</span><br><span class="line"></span><br><span class="line">test_feature_extract &#x3D; pd.DataFrame(index&#x3D;test_feature.index)</span><br><span class="line">for index,col in enumerate(col_bin_name):</span><br><span class="line">    pattern &#x3D; re.compile(col[0][:2]+&#39;_[0-9]*&#39;)</span><br><span class="line">    find_name &#x3D; [re.findall(pattern,char) for char in test_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">    name &#x3D; &#39;sum_bins_&#39;+str(index)</span><br><span class="line">    test_feature_extract[name] &#x3D; test_feature[np.concatenate(find_name,axis&#x3D;0)].sum(axis&#x3D;1)</span><br><span class="line">test_feature_extract[&#39;bins_max&#39;] &#x3D; test_feature_extract.max(axis&#x3D;1)</span><br><span class="line"></span><br><span class="line">## 把特征分为数值特征和直方图特征两部分</span><br><span class="line">train_num_feature &#x3D; train_feature[train_feature.columns.difference(np.concatenate(bin_name_lst,axis&#x3D;0))];</span><br><span class="line">train_bin_feature &#x3D; train_feature[np.concatenate(bin_name_lst,axis&#x3D;0)];</span><br><span class="line"></span><br><span class="line">test_num_feature &#x3D; test_feature[test_feature.columns.difference(np.concatenate(bin_name_lst,axis&#x3D;0))];</span><br><span class="line">test_bin_feature &#x3D; test_feature[np.concatenate(bin_name_lst,axis&#x3D;0)];</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">## 特征抽取二：</span><br><span class="line">## 生成基准分布</span><br><span class="line">from matplotlib import pyplot as plt</span><br><span class="line"># pos均匀分布</span><br><span class="line"># neg均匀分布</span><br><span class="line">pos_distribution_mean &#x3D; []</span><br><span class="line">neg_distribution_mean &#x3D; []</span><br><span class="line">for index,col in enumerate(col_bin_name):</span><br><span class="line">    pattern &#x3D; re.compile(col[0][:2]+&#39;_[0-9]*&#39;)</span><br><span class="line">    find_name &#x3D; [re.findall(pattern,char) for char in train_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">    pos &#x3D; train_bin_feature.iloc[train_label[train_label&#x3D;&#x3D;1].index.tolist()][np.concatenate(find_name,axis&#x3D;0)]</span><br><span class="line">    neg &#x3D; train_bin_feature.iloc[train_label[train_label&#x3D;&#x3D;0].index.tolist()][np.concatenate(find_name,axis&#x3D;0)]</span><br><span class="line">    pos_distribution_mean.append(pos.sum(axis&#x3D;0))</span><br><span class="line">    neg_distribution_mean.append(neg.sum(axis&#x3D;0))</span><br><span class="line"></span><br><span class="line"># 高斯分布</span><br><span class="line">gs_distribution_sample &#x3D; np.random.normal(loc&#x3D;5.0, scale&#x3D;1.5,size&#x3D;500000)</span><br><span class="line">gs_distribution &#x3D; plt.hist(gs_distribution_sample,bins&#x3D;10)[0]</span><br><span class="line"></span><br><span class="line"># 分布归一化</span><br><span class="line">pos_dis &#x3D; [pos&#x2F;pos.sum() for pos in pos_distribution_mean];</span><br><span class="line">neg_dis &#x3D; [neg&#x2F;neg.sum() for neg in neg_distribution_mean];</span><br><span class="line">gs_distribution &#x3D; gs_distribution&#x2F;gs_distribution.sum()</span><br><span class="line"></span><br><span class="line">## 定义wasserstein距离(推土机距离)和JS散度</span><br><span class="line">from scipy.stats import entropy</span><br><span class="line">from scipy.stats import wasserstein_distance</span><br><span class="line">def js_dis(x,q):</span><br><span class="line">    M&#x3D;(x+q)&#x2F;2</span><br><span class="line">    js2&#x3D;0.5*entropy(x, M)+0.5*entropy(q, M)</span><br><span class="line">    return js2</span><br><span class="line">def ws_dis(x,q):</span><br><span class="line">    return wasserstein_distance(x,q)</span><br><span class="line">    </span><br><span class="line">## 特征抽取二：</span><br><span class="line">## 没有tqdm的需要先安装tqdm这个包。</span><br><span class="line">## 这个步骤的计算时间非常长，请耐心等待。</span><br><span class="line">## 训练集的特征抽取</span><br><span class="line">from tqdm import tqdm</span><br><span class="line">name_number &#x3D; 1</span><br><span class="line">for index,col in tqdm(enumerate(col_bin_name)):</span><br><span class="line">    pattern &#x3D; re.compile(col[0][:2]+&#39;_[0-9]*&#39;)</span><br><span class="line">    find_name &#x3D; [re.findall(pattern,char) for char in train_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">    temp &#x3D; train_bin_feature[np.concatenate(find_name,axis&#x3D;0)]</span><br><span class="line">    temp &#x3D; temp.apply(lambda x:x&#x2F;x.sum(),axis&#x3D;1)</span><br><span class="line">    for pos in pos_dis:</span><br><span class="line">        train_feature_extract[name_number] &#x3D; temp.apply(js_dis,axis&#x3D;1,args&#x3D;(pos.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">        train_feature_extract[name_number] &#x3D; temp.apply(ws_dis,axis&#x3D;1,args&#x3D;(pos.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">    for neg in neg_dis:</span><br><span class="line">        train_feature_extract[name_number] &#x3D; temp.apply(js_dis,axis&#x3D;1,args&#x3D;(neg.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">        train_feature_extract[name_number] &#x3D; temp.apply(ws_dis,axis&#x3D;1,args&#x3D;(neg.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">    train_feature_extract[name_number] &#x3D; temp.apply(js_dis,axis&#x3D;1,args&#x3D;(gs_distribution,))</span><br><span class="line">    name_number+&#x3D;1</span><br><span class="line">    train_feature_extract[name_number] &#x3D; temp.apply(ws_dis,axis&#x3D;1,args&#x3D;(gs_distribution,))</span><br><span class="line">    name_number+&#x3D;1    </span><br><span class="line">## 测试集的特征抽取</span><br><span class="line">name_number &#x3D; 1</span><br><span class="line">for index,col in tqdm(enumerate(col_bin_name)):</span><br><span class="line">    pattern &#x3D; re.compile(col[0][:2]+&#39;_[0-9]*&#39;)</span><br><span class="line">    find_name &#x3D; [re.findall(pattern,char) for char in test_feature.columns.tolist() if len(re.findall(pattern,char))!&#x3D;0]</span><br><span class="line">    temp &#x3D; test_bin_feature[np.concatenate(find_name,axis&#x3D;0)]</span><br><span class="line">    temp &#x3D; temp.apply(lambda x:x&#x2F;x.sum(),axis&#x3D;1)</span><br><span class="line">    for pos in pos_dis:</span><br><span class="line">        test_feature_extract[name_number] &#x3D; temp.apply(js_dis,axis&#x3D;1,args&#x3D;(pos.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">        test_feature_extract[name_number] &#x3D; temp.apply(ws_dis,axis&#x3D;1,args&#x3D;(pos.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">    for neg in neg_dis:</span><br><span class="line">        test_feature_extract[name_number] &#x3D; temp.apply(js_dis,axis&#x3D;1,args&#x3D;(neg.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">        test_feature_extract[name_number] &#x3D; temp.apply(ws_dis,axis&#x3D;1,args&#x3D;(neg.values,))</span><br><span class="line">        name_number+&#x3D;1</span><br><span class="line">    test_feature_extract[name_number] &#x3D; temp.apply(js_dis,axis&#x3D;1,args&#x3D;(gs_distribution,))</span><br><span class="line">    name_number+&#x3D;1</span><br><span class="line">    test_feature_extract[name_number] &#x3D; temp.apply(ws_dis,axis&#x3D;1,args&#x3D;(gs_distribution,))</span><br><span class="line">    name_number+&#x3D;1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">print(train_feature_extract.shape)</span><br><span class="line">print(test_feature_extract.shape)</span><br><span class="line">## 抽取完特征后，会发现部分特征是nan或者inf，这是由于在计算分布距离的时候有的分布是0导致的</span><br><span class="line">## 所以我们需要对抽取后的nan、inf这部分数据进行变换</span><br><span class="line"></span><br><span class="line">train_feature_extract &#x3D; train_feature_extract.fillna(-1)</span><br><span class="line">test_feature_extract &#x3D; test_feature_extract.fillna(-1)</span><br><span class="line"></span><br><span class="line">def f_inf(x):</span><br><span class="line">    if x&#x3D;&#x3D;np.inf:</span><br><span class="line">        return -2</span><br><span class="line">    else:</span><br><span class="line">        return x</span><br><span class="line">train_feature_extract &#x3D; train_feature_extract.applymap(f_inf)</span><br><span class="line">test_feature_extract &#x3D; test_feature_extract.applymap(f_inf)</span><br></pre></td></tr></table></figure>
<h4 id="模型设计和集成"><a class="markdownIt-Anchor" href="#模型设计和集成"></a> 模型设计和集成</h4>
<p>处理好数据之后使用数据对模型进行训练模型，此处我选择了Logistic 回归、决策树和随机森林三个基础模型，并根据使用交叉验证和网格搜索选择合适的参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## 模型选择、交叉验证、网格搜索</span><br><span class="line">from sklearn.model_selection import GridSearchCV</span><br><span class="line">from sklearn.metrics import roc_auc_score, make_scorer</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">#网格搜索：逻辑斯特回归</span><br><span class="line">param&#x3D;&#123; &#39;C&#39;:[0.0001,0.001,0.01,0.1,0.5,1.0]&#125;</span><br><span class="line">Grid2&#x3D;GridSearchCV(estimator&#x3D;LogisticRegression(),param_grid&#x3D;param,scoring&#x3D;make_scorer(roc_auc_score))</span><br><span class="line">Grid2.fit(train_feature_extract, train_label)</span><br><span class="line">print(f&quot;逻辑斯特回归交叉验证中测试的最优参数：&#123;Grid2.best_params_&#125;&quot;)</span><br><span class="line">print(f&quot;逻辑斯特回归交叉验证中AUC最高得分：&#123;Grid2.best_score_&#125;&quot;)</span><br><span class="line">best_model_lgr &#x3D; Grid2.best_estimator_</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#网格搜索：决策树</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier</span><br><span class="line">parameters &#x3D; &#123;&#39;max_depth&#39;:[3, 5, 7, 9],&#39;min_samples_leaf&#39;: [1, 2, 3, 4]&#125;# 选择两个超参数 树的深度max_depth和叶子的最小值min_samples_leaf</span><br><span class="line">Grid1 &#x3D; GridSearchCV(estimator&#x3D;DecisionTreeClassifier(random_state&#x3D;0), param_grid&#x3D;parameters,scoring &#x3D; make_scorer(roc_auc_score),cv&#x3D;3)# 进行网格搜索得到最优参数组合</span><br><span class="line">Grid1.fit(train_feature_extract, train_label) #通过有最优参数组合的最优模型进行训练</span><br><span class="line">print(f&quot;决策树交叉验证中测试的最优参数：&#123;Grid1.best_params_&#125;&quot;)</span><br><span class="line">print(f&quot;决策树交叉验证中AUC最高得分：&#123;Grid1.best_score_&#125;&quot;)</span><br><span class="line">best_model_dtc &#x3D; Grid1.best_estimator_</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#随机森林很多内部变量的网格搜索</span><br><span class="line">from sklearn.svm import SVC</span><br><span class="line">from sklearn.ensemble import RandomForestClassifier</span><br><span class="line">#首先对n_estimators进行网格搜索：</span><br><span class="line">param_test1 &#x3D; &#123;&#39;n_estimators&#39;:[20,30,40,50]&#125;</span><br><span class="line">gsearch1 &#x3D; GridSearchCV(estimator &#x3D; RandomForestClassifier(min_samples_split&#x3D;100,</span><br><span class="line">                                  min_samples_leaf&#x3D;20,max_depth&#x3D;8,max_features&#x3D;&#39;sqrt&#39; ,random_state&#x3D;10), </span><br><span class="line">                       param_grid &#x3D; param_test1, scoring&#x3D;&#39;roc_auc&#39;,cv&#x3D;5)</span><br><span class="line">gsearch1.fit(train_feature_extract,train_label)</span><br><span class="line">print( gsearch1.best_params_, gsearch1.best_score_)#,gsearch1.cv_results_打印拟合结果)</span><br><span class="line">#接着对决策树最大深度max_depth进行网格搜索。</span><br><span class="line">param_test2 &#x3D; &#123;&#39;max_depth&#39;:[1,2,3,5,7,9,11,13]&#125;</span><br><span class="line">gsearch2 &#x3D; GridSearchCV(estimator &#x3D; RandomForestClassifier(n_estimators&#x3D;50, min_samples_split&#x3D;100,</span><br><span class="line">                                  min_samples_leaf&#x3D;20,max_features&#x3D;&#39;sqrt&#39; ,oob_score&#x3D;True, random_state&#x3D;10),</span><br><span class="line">param_grid &#x3D; param_test2, scoring&#x3D;&#39;roc_auc&#39;,iid&#x3D;False, cv&#x3D;5)</span><br><span class="line">gsearch2.fit(train_feature_extract,train_label)</span><br><span class="line">print( gsearch2.best_params_, gsearch2.best_score_)</span><br><span class="line">#得到max_depth&#x3D;5。</span><br><span class="line">#下面再对内部节点再划分所需最小样本数min_samples_split和叶子节点最少样本数min_samples_leaf一起调参。</span><br><span class="line">param_test3 &#x3D; &#123;&#39;min_samples_split&#39;:[80,100,150], &#39;min_samples_leaf&#39;:[10,20,50,100]&#125;</span><br><span class="line">gsearch3 &#x3D; GridSearchCV(estimator &#x3D; RandomForestClassifier(n_estimators&#x3D; 50, max_depth&#x3D;5,</span><br><span class="line">                                  max_features&#x3D;&#39;sqrt&#39; ,oob_score&#x3D;True, random_state&#x3D;10),</span><br><span class="line">   param_grid &#x3D; param_test3, scoring&#x3D;&#39;roc_auc&#39;,iid&#x3D;False, cv&#x3D;5)</span><br><span class="line">gsearch3.fit(train_feature_extract,train_label)</span><br><span class="line">print( gsearch3.best_params_, gsearch3.best_score_)</span><br><span class="line">#得到min_samples_split&#x3D;50和min_samples_leaf&#x3D;150</span><br><span class="line">#再对最大特征数max_features做调参:</span><br><span class="line">param_test4 &#x3D; &#123;&#39;max_features&#39;:[3,5,7,9,11]&#125;</span><br><span class="line">gsearch4 &#x3D; GridSearchCV(estimator &#x3D; RandomForestClassifier(n_estimators&#x3D; 50, max_depth&#x3D;5, min_samples_split&#x3D;150,</span><br><span class="line">                                  min_samples_leaf&#x3D;50 ,oob_score&#x3D;True, random_state&#x3D;10),</span><br><span class="line">   param_grid &#x3D; param_test4, scoring&#x3D;&#39;roc_auc&#39;,iid&#x3D;False, cv&#x3D;5)</span><br><span class="line">gsearch4.fit(train_feature_extract,train_label)</span><br><span class="line">print( gsearch4.best_params_, gsearch4.best_score_)</span><br><span class="line">#得到&#39;max_features&#39;&#x3D;9</span><br><span class="line">#用我们搜索到的最佳参数，我们再看看最终随机森林的模型拟合：</span><br><span class="line">rf2 &#x3D; RandomForestClassifier(n_estimators&#x3D; 50, max_depth&#x3D;5, min_samples_split&#x3D;150,</span><br><span class="line">                                  min_samples_leaf&#x3D;50,max_features&#x3D;9, oob_score&#x3D;True, random_state&#x3D;10)</span><br><span class="line">rf2.fit(train_feature_extract,train_label)</span><br><span class="line">best_model_rfc &#x3D; rf2</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.metrics import confusion_matrix</span><br><span class="line">from sklearn.metrics import roc_auc_score</span><br><span class="line">#测试集上结果</span><br><span class="line">print(f&quot;决策树测试集上的AUC是:&#123;roc_auc_score(test_label,best_model_dtc.predict(test_feature_extract))&#125;&quot;)</span><br><span class="line">print(f&quot;逻辑斯特回归测试集上的AUC是:&#123;roc_auc_score(test_label,best_model_lgr.predict(test_feature_extract))&#125;&quot;)</span><br><span class="line">print(f&quot;随机森林回归测试集上的AUC是:&#123;roc_auc_score(test_label, best_model_rfc.predict(test_feature_extract))&#125;&quot;)</span><br></pre></td></tr></table></figure>
<p>结果显示，在训练集上使用Logistic回归得到的AUC参数为0.606，决策树得到的AUC为0.644，略高于Logistic回归，通过随机森林得到的AUC为0.969。</p>
<p>验证集上的结果分别为：决策树AUC 0.744，逻辑斯特回归测试集上的AUC是:0.762，随机森林回归测试集上的AUC是:0.660。随机森林在训练集和测试集上差异大的原因可能是出现了过拟合。</p>
<p>除了直接查看AUC，还可以通过用AUC=0.5作为阈值看结果的混淆矩阵，同时设计一个随机猜测函数作为baseline来进一步查看模型相对于随机猜测时候的优势。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#查看以0.5作为阈值的混淆矩阵</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">true&#x3D;test_label</span><br><span class="line">pred1&#x3D;Grid1.predict(test_feature_extract)</span><br><span class="line">pred2&#x3D;Grid2.predict(test_feature_extract)</span><br><span class="line">pred3&#x3D;best_model_rfc.predict(test_feature_extract)</span><br><span class="line">#导入混淆矩阵函数</span><br><span class="line">cm1&#x3D;confusion_matrix(true,pred1)</span><br><span class="line">cm2&#x3D;confusion_matrix(true,pred2)</span><br><span class="line">cm3&#x3D;confusion_matrix(true,pred3)</span><br><span class="line">#导入作图函数</span><br><span class="line">plt.matshow(cm1,cmap&#x3D;plt.cm.Greens)</span><br><span class="line">sns.heatmap(cm1,annot&#x3D;True)</span><br><span class="line">plt.matshow(cm2,cmap&#x3D;plt.cm.Greens)</span><br><span class="line">sns.heatmap(cm2,annot&#x3D;True)</span><br><span class="line">plt.matshow(cm3,cmap&#x3D;plt.cm.Greens)</span><br><span class="line">sns.heatmap(cm3,annot&#x3D;True)</span><br><span class="line">#输出为混淆矩阵</span><br><span class="line">#TODO：随机猜测函数</span><br><span class="line">random&#x3D; np.random.randint(0,2,16000)</span><br><span class="line">cm0&#x3D;confusion_matrix(true,random)</span><br><span class="line">plt.matshow(cm0,cmap&#x3D;plt.cm.Greens)</span><br><span class="line">sns.heatmap(cm0,annot&#x3D;True)</span><br></pre></td></tr></table></figure>
<p>![混淆矩阵:左上（决策树）右上（Logistic）左下（随机森林）右下（随机猜测）](机器学习智能汽车/屏幕快照 2020-05-16 下午11.45.35.png)</p>
<p>在训练完单个模型之后，我们将进行模型的集成。集成技术是将多个分类器的结果或性能结合起来，以提高单个分类器的性能。该方法通过装配不同的分类器来修改单个分类器的归纳能力[<a href="#_edn2">ii]</a>，也能更好地解决样本不均衡的问题。此处，我们使用stacking的方法对步骤四生成的不同学习器进行集成，同时画出集成后模型的ROC曲线。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">## TODO:模型集成</span><br><span class="line">from mlxtend.classifier import EnsembleVoteClassifier</span><br><span class="line">from mlxtend.data import iris_data</span><br><span class="line">clf1&#x3D;best_model_dtc</span><br><span class="line">clf2&#x3D;best_model_lgr</span><br><span class="line">clf3&#x3D;best_model_rfc</span><br><span class="line">eclf&#x3D;EnsembleVoteClassifier(clfs&#x3D;[clf1, clf2,clf3],</span><br><span class="line">                              weights&#x3D;[2,1,1], voting&#x3D;&#39;soft&#39;)</span><br><span class="line">eclf.fit(train_feature_extract,train_label)</span><br><span class="line">## TODO：ROC曲线</span><br><span class="line"></span><br><span class="line">from sklearn.metrics import roc_curve, auc</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from sklearn.model_selection import StratifiedKFold</span><br><span class="line"></span><br><span class="line">probas_ &#x3D; eclf.predict_proba(test_feature_extract) # 训练模型后预测每条样本得到两种结果的概率</span><br><span class="line">fpr, tpr, thresholds &#x3D; roc_curve(test_label, probas_[:, 1])    # 该函数得到伪正例、真正例、阈值，这里只使用前两个</span><br><span class="line">roc_auc &#x3D; auc(fpr, tpr)  # 求auc面积</span><br><span class="line">plt.plot(fpr, tpr, lw&#x3D;1, label&#x3D;&#39;ROC (area &#x3D; &#123;1:.2f&#125;)&#39;.format(i, roc_auc))    # 画出当前分割数据的ROC曲线</span><br><span class="line"> </span><br><span class="line">plt.plot([0, 1], [0, 1], &#39;--&#39;, color&#x3D;(0.6, 0.6, 0.6), label&#x3D;&#39;Luck&#39;) # 画对角线</span><br><span class="line">plt.xlim([-0.05, 1.05])     # 设置x、y轴的上下限，设置宽一点，以免和边缘重合，可以更好的观察图像的整体</span><br><span class="line">plt.ylim([-0.05, 1.05])</span><br><span class="line">plt.xlabel(&#39;False Positive Rate&#39;)</span><br><span class="line">plt.ylabel(&#39;True Positive Rate&#39;)    # 可以使用中文，但需要导入一些库即字体</span><br><span class="line">plt.title(&#39;ROC curve&#39;)</span><br><span class="line">plt.legend(loc&#x3D;&quot;lower right&quot;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%99%BA%E8%83%BD%E6%B1%BD%E8%BD%A6/4.png" alt="集成后模型的ROC曲线"></p>
<h3 id="结果分析"><a class="markdownIt-Anchor" href="#结果分析"></a> <strong>结果分析</strong></h3>
<p>在实际的业务问题中，不能简单的通过准确率，召回率或者精确率来评估阈值。换言之，对于口碑至上的名车厂而言，对miss fault（把健康状况不良的车辆看成好的）的容忍度对falsely predict（把健康状况良好的汽车错误当成不好的）的容忍度要低很多。前者意味着安全和品牌的声誉，后者只是需要额外付出财力。这两者之间的代价关系和权重需要有专门的研究。</p>
<p>在这个问题中，我们简单地把$ miss fault <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">代</mi><mi mathvariant="normal">价</mi><mi mathvariant="normal">是</mi><mn>500</mn><mi mathvariant="normal">，</mi></mrow><annotation encoding="application/x-tex">代价是500，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord cjk_fallback">代</span><span class="mord cjk_fallback">价</span><span class="mord cjk_fallback">是</span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span><span class="mord cjk_fallback">，</span></span></span></span>falsely$ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">predict</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mord mathdefault">i</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span></span></span></span>代价是10，那么我们需要找到一个阈值，使得总代价$ cost $最小。</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo>=</mo><mn>1000</mn><mo>∗</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>m</mi></msub><mi>f</mi><mo>+</mo><mn>10</mn><mo>∗</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>f</mi></msub><mi>p</mi></mrow><annotation encoding="application/x-tex">cost=1000*num_mf+10*num_fp
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord mathdefault">p</span></span></span></span></span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">## TODO：找阈值使得cost最小</span><br><span class="line">thresholds&#x3D;[0.8,0.81,0.812,0.813,0.814,0.815,0.816,0.817,0.818,0.819,0.82]</span><br><span class="line">cost&#x3D;500*16000</span><br><span class="line">for i in thresholds:</span><br><span class="line">    probas_ &#x3D; eclf.predict_proba(test_feature_extract) # 训练模型后预测每条样本得到两种结果的概率</span><br><span class="line">    arr&#x3D;probas_[:,1]</span><br><span class="line">    arr[arr &gt; i] &#x3D; 1</span><br><span class="line">    arr[arr &lt;&#x3D; i] &#x3D; 0</span><br><span class="line">    y_predict&#x3D;arr</span><br><span class="line">    def TN(y_true, y_predict):</span><br><span class="line">        assert len(y_true) &#x3D;&#x3D; len(y_predict)  </span><br><span class="line">        return np.sum((y_true&#x3D;&#x3D;0)&amp;(y_predict&#x3D;&#x3D;0))</span><br><span class="line">    def FP(y_true, y_predict):</span><br><span class="line">        assert len(y_true) &#x3D;&#x3D; len(y_predict)</span><br><span class="line">        return np.sum((y_true&#x3D;&#x3D;0)&amp;(y_predict&#x3D;&#x3D;1))</span><br><span class="line">    cost_temp&#x3D;500*FP(test_label,arr)+10*TN(test_label,arr)</span><br><span class="line">    if cost_temp&lt;cost:</span><br><span class="line">        cost&#x3D;cost_temp </span><br><span class="line">        thresholds_best&#x3D;i</span><br><span class="line">print(cost,thresholds_best)      </span><br><span class="line">#阈值在0.814左右cost最小，最佳。即当概率小于0.814时，车即被判为性能不正常进行检修</span><br></pre></td></tr></table></figure>
<p>最后得出的结果显示，阈值为0.814时，总代价$ cost $最小。也就是，当阈值大于0.814时，车被判为健康状况不良进行检修，对车厂的效率是最高的。</p>
<p>对于这类不同的分类错误会导致不同的惩罚力度时如何训练分类器的问题，除了阈值的筛选，还有一些前沿的解决方法，称为代价敏感的学习方法[<a href="#_edn3">iii]</a>。代价敏感学习的算法研究又可以分成三类：</p>
<p>（1）直接构造一个代价敏感的学习模型；</p>
<p>（2）基于对分类结果的后处理，即按照传统的学习方法学习一个分类模型，然后对其分类结果按照贝叶斯风险理论对结果进行调整，以达到最小的损失。</p>
<p>（3）基于传统的学习模型，通过改变原始训练数据的分布来训练得到代价敏感的模型。</p>
<h3 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> <strong>总结</strong></h3>
<p>在本项目中，我们对智能汽车传感器的数据应用了机器学习的方法来判断汽车的健康状况，通过数据清洗、特征选择、模型集成等方法，测试集上的分类的准确率达到94%。同时，在最后一部分，我们根据实际情况对阈值进行重新考量，建立车厂召回汽车的代价函数，让车厂在选择召回汽车的决策中效率最佳。</p>
<hr>
<p>[<a href="#_ednref1">i]</a> 汽车传感器：智能汽车的感知与计算</p>
<p>[<a href="#_ednref2">ii]</a> 机器学习：处理不平衡数据的5个重要技术</p>
<p>[<a href="#_ednref3">iii]</a> 代价敏感分类算法的实验比较。闫明松，周志华。模式识别与人工智能。Vol.18 No.5。Oct 2005</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/07/5-7diary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/07/5-7diary/" itemprop="url">5.7diary</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-07T14:20:58+08:00">
                2020-05-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BB%8A%E5%A4%A9%E6%88%91%E5%AD%A6%E4%BA%86%E5%95%A5/" itemprop="url" rel="index">
                    <span itemprop="name">今天我学了啥</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>修改辐射制冷Review的Introduction部分，熟悉科技论文写作。</p>
<p><strong><em>It’s one of those “forest and tree” situations: in a research report, the scientists are examining a tree; in a review paper, the scientist is looking at the forest.</em></strong></p>
</li>
<li><p>这篇review写作从开始下笔到只剩下Introduction和Outlook其实只花了我大概三个礼拜时间，中途还有四天时间去参加了美赛（但那些天真的是对着电脑从早上八点到晚上十一点，剩下一个支离破碎的腰椎。）主体部分完工之后写Introduction和Ourlook却憋了我快半个月，一直到三月中旬才写出一个样子来，并且现在仍然对自己的英文表述和看法非常不自信。这也不得不让我承认事情：<strong>简介和展望</strong>确实是论文撰写中最最最困难的部分，尤其是对于本身在这个领域没有经历过长期摸爬滚打的小白……</p>
</li>
</ul>
<p><img src="/2020/05/07/5-7diary/1.png" alt></p>
<ul>
<li><p>搜集了一些关于Introduction/discussion怎么写的指导，摘录在这里，小朋友，理论基础要打牢，避免想当然走弯路，前人的经验还是可以看一看的。</p>
</li>
<li><p>摘自科罗拉多州立大学写作指南</p>
<blockquote>
<h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h4><p>The introduction of your review should accomplish three things:</p>
<ul>
<li>Introduce your topic 介绍你的主题（它可能是个陌生的概念）<ul>
<li>It may sound redundant to “introduce” your topic in the introduction, but often times writer’s fail to do so. Let the reader in on background information specific to the topic, define terms that may be unfamiliar to them, explain the scope of the discussion, and your purpose for writing the review.</li>
</ul>
</li>
<li>State your topic’s relevance 介绍跟这个主题相关的背景（目前发展的情况，要有对话感，让没有接触过这个领域的人能建立起思想框架）<ul>
<li>Think of your review paper as a statement in the larger conversation of your academic community. Your review is your way of entering into that conversation and it is important to briefly address why your review is relevant to the discussion. You may feel the relevance is obvious because you are so familiar with the topic, but your readers have not yet established that familiarity.</li>
</ul>
</li>
<li>Reveal your thesis to the reader 将接下来的几个部分陈述一遍<ul>
<li>The thesis is the main idea that you want to get across to your reader. your thesis should be a clear statement of what you intend to prove or illustrate by your review. By revealing your thesis in the introduction the reader knows what to expect in the rest of the paper.</li>
</ul>
</li>
</ul>
<h4 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h4><p>The discussion section is the body of your paper. The discussion section contains information that develops and supports your thesis. While there is no particular form that a discussion section must take there are several considerations that a writer must follow when building a discussion.</p>
<ul>
<li><p>Don’t summarize! 不能总结，总结在conclusion里面</p>
<ul>
<li>A review paper is not simply a summary of literature you have reviewed. Be careful not to leave out your own analysis of the ideas presented in the literature. Synthesize the material from all the works—what are the connections you see, or the connections you are trying to illustrate, among your readings.</li>
</ul>
</li>
<li><p>Analyze, Synthesize, Interpret.要分析……（最困难的部分），拒绝单纯的将事实和研究拼凑在一起。</p>
<p>简单的分析方法比如找关联：按照时间线找关联，按照逻辑关系找关联；</p>
<p>找对比：两种方法论有什么区别，好处和坏处、适用的范围；等</p>
<p>找意义：这件事对后来该领域的转变又多大的启发，对未来有什么启发；</p>
<ul>
<li>A review paper is not a pure summary of the information you read for your review. You are required to analyze, synthesize, and interpret the information you read in some meaningful way. It is not enough to simply present the material you have found, you must go beyond that and explain its relevance and significance to the topic at hand. Establish a clear thesis from the onset of your writing and examine which pieces of your reading help you in developing and supporting the ideas in your thesis.</li>
</ul>
</li>
<li><p>Stay focused.</p>
<ul>
<li>Keep your discussion focused on your topic and more importantly your thesis. Don’t let tangents or extraneous material get in the way of a concise, coherent discussion. A well focused paper is crucial in getting your message across to your reader.</li>
</ul>
</li>
<li><p>Organize your points.</p>
<ul>
<li>Keeping your points organized makes it easier for the reader to follow along and make sense of your review. Start each paragraph with a topic sentence that relates back to your thesis. The headings used for this guide give you some idea of how to organize the overall paper, but as far as the discussion section goes use meaningful subheadings that relate to your content to organize your points.</li>
</ul>
</li>
<li><p>Relate the discussion to your thesis.</p>
<ul>
<li>Your thesis should illustrate your objectives in writing the review and your discussion should serve to accomplish your objectives. Make sure your keep your discussion related to the thesis in order to meet your objectives. If you find that your discussion does not relate so much to your thesis, don’t panic, you might want to revise your thesis instead of reworking the discussion.</li>
</ul>
</li>
</ul>
<h4 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h4><p>Because the conclusions section often gets left for last it is often the weakest part of a student review paper. It is as crucial a part of the paper as any and should be treated as such.</p>
<p>A good conclusion should illustrate the key connections between your major points and your thesis as well as they key connections between your thesis and the broader discussion—what is the significance of your paper in a larger context? Make some <em>conclusions</em>—where have you arrived as a result of writing this paper?</p>
<p>Be careful not to present any new information in the conclusion section.</p>
</blockquote>
</li>
<li><p>另一个版本来自弗罗里达州立大学的Thesis Writing in the Sciences</p>
<blockquote>
<p>首先它给出了Review和Paper的不同</p>
<p>In contrast to research papers, conference presentations, and proposals, a review paper is a journal article that <strong>synthesizes</strong> work by many independent researchers on a particular subject or scientific problem. By bringing together the most pertinent findings of a large number of studies, a review paper serves as a <strong>valuable summary</strong> of research. Although it does not present the writer’s new discoveries, it does reflect his or her painstaking review of the literature in a defined field. Moreover, a good review not only summarizes information but also provides <strong>interpretative analysis</strong> and sometimes a <strong>historical perspective</strong>. Reviews may vary in aims, scope, length, and format, but they all include a relatively lengthy reference section. Journal editors sometimes invite prominent experts to write reviews of their particular fields, since the ability to give an audience an authoritative overview of a subject usually develops with experience. Whether solicited or unsolicited, review papers still must conform to journal specifications, and their author receive feedback from editors and reviewers before final publication.</p>
<p>接着展示了一个简介写作的典范</p>
<p>The images below this one show a typical Review Introduction in medicine. It is brief and leads the reader quickly to where the information in the paper happens: the body.</p>
<p><img src="/2020/05/07/5-7diary/review_intro_example.bmp" alt></p>
<p><img src="/2020/05/07/5-7diary/reivew_intro_example_overview.bmp" alt></p>
<p>很容易遗忘的是Gap部分。要时刻记住，你是对这个领域有洞察，那么就要有批判性的眼光，从历史的角度去衡量哪些部分是做的远远不够的，是限制这个领域发展的。然后给致力于研究的同仁提出一些建议。</p>
</blockquote>
</li>
<li><p>在吃饭时观看3Blue1Brown关于线性代数本质的视频，并且大喊“卧槽”。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ren Yixin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yixin's sharing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/" itemprop="url">如何用MATLAB在计算资源有限的树莓派ARM CPU上运行复杂深度神经网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-04T21:17:51+08:00">
                2020-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MATLAB%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index">
                    <span itemprop="name">MATLAB进阶学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  765
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><strong>前言</strong></h4>
<p>本人作为传统工科出身的朋友，专业之余学过一些机器学习和深度学习的理论，了解一些基本的代码原理和架构。同时呢，因为本专业的训练，对控制技术也有（只限于课本的）了解。但是由于没有进行过实践，一直以来对算法和控制的认识都比较割裂，对两者之间如何搭建起桥梁也云里雾里。今天我在MATHWORKS上听了一节关于如何在计算资源有限的树莓派（Raspberry Pi）ARM CPU上运行复杂深度神经网络的讲座，MATLAB在其中起到了重要作用。我将讲座中进行的重要步骤和提要记在下面。形成一个框架，细节可以用到了慢慢填。</p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%207%207.png"></p>
<p>Demo 1:训练网络。该步骤使用了迁移学习的思想，用了SqueezeNet模型</p>
<p>Demo 2:将神经网络部署到树莓派的CPU中，其中涉及到将预训练网络自动生成C++代码</p>
<p>Demo 3:将神经网络部署到NVIDIA GPU上，其中涉及到将预训练网络自动生成CUDA代码</p>
<h4 id="连接准备"><strong>连接准备</strong></h4>
<h5 id="安装树莓派和网络摄像头同时配置">安装树莓派和网络摄像头，同时配置</h5>
<h5 id="确认和测试命令行输入webcam确认已经连接获取硬件信息">确认和测试：命令行输入webcam，确认已经连接，获取硬件信息</h5>
<figure>
<img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%203%203.png" alt="配置外部硬件"><figcaption>配置外部硬件</figcaption>
</figure>
<figure>
<img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%204%204.png" alt="硬件支持包界面"><figcaption>硬件支持包界面</figcaption>
</figure>
<h5 id="nvidia-gpu配置">NVIDIA GPU配置：</h5>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%205%205.png"></p>
<h5 id="确认输入coder.checkgpuinstall确认硬件已经连接检查环境">确认：输入coder.checkGpuInstall，确认硬件已经连接，检查环境</h5>
<h4 id="预训练squeezenet神经网络在gpu上实现"><strong>预训练Squeezenet神经网络，在GPU上实现</strong></h4>
<p>此处用迁移学习实现图像识别，一般在应用时只需要优化最后几层的参数，前面特征提取的参数都做的挺好的了。</p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%209%209.png"></p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%208%208.png"></p>
<h5 id="收集和分类数据">收集和分类数据</h5>
<h5 id="准备训练及测试图片集">准备训练及测试图片集</h5>
<p>载入图库----&gt;加载Squeezenet模型并且修改----&gt;调整图库------&gt;进行模型训练----&gt;测试----&gt;导出模型到.mat文件</p>
<p>注：模型训练中的代码段...,‘ExecutionEnvironment’选项为'gpu'，适用GPU加速</p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/屏幕快照%202020-05-13%20下午9.38.14.png"></p>
<h4 id="自动生成c代码"><strong>自动生成C++代码</strong></h4>
<p>通过cnncodegen转化成C++代码集：</p>
<ul>
<li>本机环境预设置</li>
<li>cnncodegen（net,'targetlab','libraryname'）;树莓派选择'arm-computer'</li>
<li>提供主函数，手写main</li>
</ul>
<figure>
<img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/屏幕快照%202020-05-13%20下午9.30.11.png" alt="目标器件为ARM的cnncongegen流程"><figcaption>目标器件为ARM的cnncongegen流程</figcaption>
</figure>
<h4 id="在树莓派上进行部署和推断"><strong>在树莓派上进行部署和推断</strong></h4>
<p>以下是在树莓派上进行推断的结构图，net.predict(in)处需要放入训练过的模型生成好的C++程序</p>
<p>在树莓派中构建基于ARM Compute Library的可执行程序</p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/屏幕快照%202020-05-13%20下午9.32.07.png"></p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%2012%2012.png"></p>
<p>运行结果</p>
<figure>
<img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/屏幕快照%202020-05-13%20下午9.45.11.png" alt="99.4%正确率，374ms的腿短时间"><figcaption>99.4%正确率，374ms的腿短时间</figcaption>
</figure>
<h4 id="总结"><strong>总结</strong></h4>
<p>回答一下最初的疑惑，算法如何在控制器上体现可以总结为如下框图：</p>
<p>算法设计----应用设计----独立部署</p>
<p>其中MATLAB起到的作用有，存储数据，设计神经网络（可以借助大牛们搭好的），借用GPU进行训练，将过程可视化。打包模型之后也能在MATLAB中可以生成C++代码和CUDA代码，独立部署到需要的树莓派/GPU/CPU中去。</p>
<p><img src="/2020/05/04/MATLAB%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B5%8C%E5%85%A5/%2013%2013.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Ren Yixin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ren Yixin</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">38.2k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>



<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共38.2k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
